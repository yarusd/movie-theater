<!DOCTYPE html>
<html lang="he" dir="ltr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MovieTime ðŸŽ¬</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500;600&display=swap"
    rel="stylesheet" />
  <style>
    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0
    }

    :root {
      --bg: #0a0a0f;
      --bg2: #111118;
      --bg3: #1a1a24;
      --card: #16161e;
      --border: #2a2a38;
      --accent: #e8b84b;
      --accent2: #ff4f4f;
      --accent3: #4f9eff;
      --text: #f0eee8;
      --text2: #9896a4;
      --text3: #5a5870;
      --success: #4caf7d;
      --error: #ff4f4f;
      --warning: #e8b84b;
      --radius: 12px;
      --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      --transition: 0.2s ease;
    }

    .light {
      --bg: #f5f3ee;
      --bg2: #ede9e0;
      --bg3: #e4e0d5;
      --card: #faf8f3;
      --border: #d4cfc2;
      --text: #1a1814;
      --text2: #5a5650;
      --text3: #9a9690;
      --shadow: 0 8px 32px rgba(0, 0, 0, 0.1)
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      line-height: 1.6;
      min-height: 100vh;
      transition: background .3s, color .3s
    }

    ::-webkit-scrollbar {
      width: 6px
    }

    ::-webkit-scrollbar-track {
      background: var(--bg2)
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 3px
    }

    .app {
      min-height: 100vh;
      display: flex;
      flex-direction: column
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
      width: 100%
    }

    .page {
      flex: 1;
      padding: 32px 0
    }

    /* NAVBAR */
    .navbar {
      background: rgba(10, 10, 15, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 100
    }

    .light .navbar {
      background: rgba(245, 243, 238, 0.95)
    }

    .navbar-inner {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 24px;
      max-width: 1200px;
      margin: 0 auto;
      flex-wrap: wrap
    }

    .logo {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 26px;
      color: var(--accent);
      cursor: pointer;
      letter-spacing: 2px;
      flex-shrink: 0
    }

    .logo span {
      color: var(--text)
    }

    .nav-links {
      display: flex;
      gap: 4px;
      flex: 1;
      flex-wrap: wrap
    }

    .nbtn {
      background: none;
      border: none;
      color: var(--text2);
      cursor: pointer;
      padding: 7px 13px;
      border-radius: 8px;
      font-size: 14px;
      font-family: 'DM Sans', sans-serif;
      font-weight: 500;
      transition: all var(--transition)
    }

    .nbtn:hover,
    .nbtn.act {
      background: var(--bg3);
      color: var(--text)
    }

    .nbtn.acc {
      background: var(--accent);
      color: #000;
      font-weight: 600
    }

    .nbtn.acc:hover {
      background: #d4a43c
    }

    .nbtn.dng {
      background: var(--accent2);
      color: #fff;
      font-weight: 600
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-left: auto;
      flex-wrap: wrap
    }

    .uname {
      font-size: 13px;
      color: var(--text2)
    }

    .tbtn {
      background: var(--bg3);
      border: 1px solid var(--border);
      color: var(--text);
      cursor: pointer;
      padding: 7px 10px;
      border-radius: 8px;
      font-size: 15px;
      transition: all var(--transition)
    }

    .badge {
      background: var(--accent2);
      color: #fff;
      border-radius: 999px;
      font-size: 11px;
      padding: 1px 6px;
      font-weight: 700;
      display: inline-block;
      margin-left: 4px
    }

    /* HERO */
    .hero {
      position: relative;
      overflow: hidden;
      background: linear-gradient(135deg, #0a0a0f, #1a0a1f 50%, #0a0f1a);
      padding: 72px 0 56px
    }

    .hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url('https://images.unsplash.com/photo-1440404653325-ab127d49abc1?w=1400&q=50') center/cover;
      opacity: .07
    }

    .hero-c {
      position: relative;
      text-align: center
    }

    .hero-t {
      font-family: 'Bebas Neue', sans-serif;
      font-size: clamp(48px, 8vw, 96px);
      color: var(--text);
      letter-spacing: 4px;
      line-height: 1
    }

    .hero-t span {
      color: var(--accent)
    }

    .hero-s {
      color: var(--text2);
      font-size: 17px;
      margin: 10px 0 28px
    }

    .srch {
      display: flex;
      gap: 12px;
      max-width: 560px;
      margin: 0 auto 20px;
      background: var(--bg3);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 5px 5px 5px 18px;
      align-items: center
    }

    .srch input {
      flex: 1;
      background: none;
      border: none;
      color: var(--text);
      font-size: 15px;
      font-family: 'DM Sans', sans-serif;
      outline: none
    }

    .srch input::placeholder {
      color: var(--text3)
    }

    .srch button {
      background: var(--accent);
      border: none;
      border-radius: 999px;
      color: #000;
      padding: 9px 22px;
      font-weight: 600;
      cursor: pointer;
      font-size: 14px;
      font-family: 'DM Sans', sans-serif;
      transition: all var(--transition)
    }

    .srch button:hover {
      background: #d4a43c
    }

    .pills {
      display: flex;
      gap: 8px;
      justify-content: center;
      flex-wrap: wrap
    }

    .pill {
      background: var(--bg3);
      border: 1px solid var(--border);
      color: var(--text2);
      padding: 5px 15px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 13px;
      font-family: 'DM Sans', sans-serif;
      transition: all var(--transition);
      font-weight: 500
    }

    .pill:hover,
    .pill.act {
      background: var(--accent);
      border-color: var(--accent);
      color: #000;
      font-weight: 600
    }

    /* SECTION */
    .stitle {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 30px;
      color: var(--text);
      letter-spacing: 2px;
      margin-bottom: 22px
    }

    .stitle span {
      color: var(--accent)
    }

    /* MOVIE GRID */
    .mgrid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px
    }

    .mcard {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      cursor: pointer;
      transition: transform var(--transition), box-shadow var(--transition);
      position: relative
    }

    .mcard:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow)
    }

    .mposter {
      position: relative;
      aspect-ratio: 2/3;
      overflow: hidden
    }

    .mposter img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform .4s
    }

    .mcard:hover .mposter img {
      transform: scale(1.05)
    }

    .moverlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(transparent 50%, rgba(0, 0, 0, .9));
      opacity: 0;
      transition: opacity var(--transition)
    }

    .mcard:hover .moverlay {
      opacity: 1
    }

    .mactions {
      position: absolute;
      bottom: 10px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 8px;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity var(--transition), transform var(--transition)
    }

    .mcard:hover .mactions {
      opacity: 1;
      transform: translateY(0)
    }

    .minfo {
      padding: 12px
    }

    .mtitle {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 5px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis
    }

    .mmeta {
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--text2);
      font-size: 12px;
      flex-wrap: wrap
    }

    .mrat {
      color: var(--accent);
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 3px
    }

    .gtag {
      background: var(--bg3);
      color: var(--text2);
      padding: 2px 7px;
      border-radius: 999px;
      font-size: 11px
    }

    .favbtn {
      background: rgba(0, 0, 0, .6);
      border: 1px solid rgba(255, 255, 255, .2);
      color: #fff;
      border-radius: 50%;
      width: 34px;
      height: 34px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      transition: all var(--transition)
    }

    .favbtn:hover,
    .favbtn.act {
      background: var(--accent2);
      border-color: var(--accent2)
    }

    .detbtn {
      background: var(--accent);
      border: none;
      color: #000;
      padding: 7px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 13px;
      font-family: 'DM Sans', sans-serif;
      transition: all var(--transition)
    }

    .detbtn:hover {
      background: #d4a43c
    }

    /* BUTTONS */
    .btn {
      background: var(--accent);
      border: none;
      color: #000;
      padding: 11px 26px;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
      font-size: 15px;
      font-family: 'DM Sans', sans-serif;
      transition: all var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 7px
    }

    .btn:hover {
      background: #d4a43c;
      transform: translateY(-1px)
    }

    .btn:disabled {
      background: var(--border);
      color: var(--text3);
      cursor: not-allowed;
      transform: none
    }

    .btn.sec {
      background: var(--bg3);
      color: var(--text);
      border: 1px solid var(--border)
    }

    .btn.sec:hover {
      background: var(--border)
    }

    .btn.dng {
      background: var(--accent2);
      color: #fff
    }

    .btn.dng:hover {
      background: #d44040
    }

    .btn.sm {
      padding: 7px 14px;
      font-size: 13px
    }

    .btn.ful {
      width: 100%;
      justify-content: center
    }

    /* FORMS */
    .fg {
      margin-bottom: 18px
    }

    .flbl {
      display: block;
      margin-bottom: 5px;
      font-size: 14px;
      font-weight: 500;
      color: var(--text2)
    }

    .finp {
      width: 100%;
      background: var(--bg3);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 11px 15px;
      border-radius: var(--radius);
      font-size: 15px;
      font-family: 'DM Sans', sans-serif;
      transition: border-color var(--transition);
      outline: none
    }

    .finp:focus {
      border-color: var(--accent)
    }

    .finp.err {
      border-color: var(--error)
    }

    .finp::placeholder {
      color: var(--text3)
    }

    .ferr {
      color: var(--error);
      font-size: 12px;
      margin-top: 4px
    }

    /* CARD */
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 22px
    }

    /* AUTH */
    .authpg {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: calc(100vh - 65px);
      padding: 32px 16px
    }

    .authcard {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 38px;
      width: 100%;
      max-width: 450px
    }

    .authtitle {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 34px;
      letter-spacing: 2px;
      margin-bottom: 5px
    }

    .authsub {
      color: var(--text2);
      margin-bottom: 24px;
      font-size: 14px
    }

    .tubox {
      background: var(--bg3);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 14px;
      margin-bottom: 22px
    }

    .tutitle {
      font-size: 11px;
      font-weight: 600;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 9px
    }

    .turow {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      color: var(--text2);
      padding: 3px 0;
      border-bottom: 1px solid var(--border)
    }

    .turow:last-child {
      border: none
    }

    .turole {
      font-size: 10px;
      padding: 1px 6px;
      border-radius: 4px;
      font-weight: 600
    }

    .turole.admin {
      background: var(--accent);
      color: #000
    }

    .turole.locked {
      background: var(--accent2);
      color: #fff
    }

    .turole.user {
      background: var(--accent3);
      color: #fff
    }

    /* ALERT */
    .alert {
      padding: 12px 16px;
      border-radius: var(--radius);
      margin-bottom: 14px;
      font-size: 14px
    }

    .alert.suc {
      background: rgba(76, 175, 125, .15);
      border: 1px solid rgba(76, 175, 125, .3);
      color: var(--success)
    }

    .alert.err {
      background: rgba(255, 79, 79, .15);
      border: 1px solid rgba(255, 79, 79, .3);
      color: var(--error)
    }

    .alert.wrn {
      background: rgba(232, 184, 75, .15);
      border: 1px solid rgba(232, 184, 75, .3);
      color: var(--warning)
    }

    .alert.inf {
      background: rgba(79, 158, 255, .15);
      border: 1px solid rgba(79, 158, 255, .3);
      color: var(--accent3)
    }

    /* MOVIE DETAILS */
    .mdhero {
      position: relative;
      overflow: hidden;
      background: var(--bg2)
    }

    .mdbg {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center;
      filter: blur(28px) brightness(.3);
      transform: scale(1.1)
    }

    .mdcnt {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: 260px 1fr;
      gap: 36px;
      padding: 56px 24px;
      max-width: 1200px;
      margin: 0 auto
    }

    .mdposter {
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 0, 0, .6);
      aspect-ratio: 2/3
    }

    .mdposter img {
      width: 100%;
      height: 100%;
      object-fit: cover
    }

    .mdinfo {
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-bottom: 6px
    }

    .mdtitle {
      font-family: 'Bebas Neue', sans-serif;
      font-size: clamp(32px, 5vw, 62px);
      letter-spacing: 2px;
      line-height: 1;
      margin-bottom: 10px
    }

    .mdmeta {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 14px;
      align-items: center
    }

    .mtag {
      background: rgba(255, 255, 255, .1);
      padding: 4px 11px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 500
    }

    .mtagr {
      background: var(--accent);
      color: #000;
      padding: 4px 11px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 700
    }

    .mddesc {
      color: var(--text2);
      line-height: 1.7;
      margin-bottom: 14px;
      font-size: 15px;
      max-width: 580px
    }

    .castlist {
      display: flex;
      flex-wrap: wrap;
      gap: 7px;
      margin-bottom: 18px
    }

    .casttag {
      background: var(--bg3);
      border: 1px solid var(--border);
      padding: 3px 11px;
      border-radius: 999px;
      font-size: 13px;
      color: var(--text2)
    }

    .sttimes {
      display: flex;
      flex-wrap: wrap;
      gap: 7px;
      margin-bottom: 20px
    }

    .stbtn {
      background: var(--bg3);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 7px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      font-family: 'DM Sans', sans-serif;
      transition: all var(--transition)
    }

    .stbtn:hover,
    .stbtn.act {
      background: var(--accent);
      border-color: var(--accent);
      color: #000
    }

    /* BOOKING */
    .bkcnt {
      max-width: 780px;
      margin: 0 auto
    }

    .screen {
      background: linear-gradient(to bottom, var(--accent3), transparent);
      height: 5px;
      border-radius: 999px;
      margin-bottom: 7px;
      opacity: .6
    }

    .screenlbl {
      text-align: center;
      color: var(--text3);
      font-size: 11px;
      letter-spacing: 2px;
      text-transform: uppercase;
      margin-bottom: 28px
    }

    .seatsgrid {
      display: flex;
      flex-direction: column;
      gap: 7px;
      align-items: center;
      margin-bottom: 20px
    }

    .seatrow {
      display: flex;
      gap: 7px;
      align-items: center
    }

    .rowlbl {
      width: 18px;
      text-align: center;
      color: var(--text3);
      font-size: 12px;
      font-weight: 600;
      flex-shrink: 0
    }

    .seat {
      width: 34px;
      height: 30px;
      border-radius: 6px 6px 4px 4px;
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: 600;
      font-family: 'DM Sans', sans-serif;
      background: none
    }

    .seat.av.std {
      border-color: var(--accent3);
      color: var(--accent3)
    }

    .seat.av.std:hover {
      background: var(--accent3);
      color: #fff
    }

    .seat.av.prm {
      border-color: var(--accent);
      color: var(--accent)
    }

    .seat.av.prm:hover {
      background: var(--accent);
      color: #000
    }

    .seat.av.bck {
      border-color: var(--text3);
      color: var(--text3)
    }

    .seat.av.bck:hover {
      background: var(--text3);
      color: #fff
    }

    .seat.sel {
      background: var(--accent) !important;
      border-color: var(--accent) !important;
      color: #000 !important;
      transform: scale(1.1)
    }

    .seat.occ {
      background: var(--bg) !important;
      border-color: var(--text3) !important;
      color: var(--text3) !important;
      cursor: not-allowed;
      opacity: .4
    }

    .slegend {
      display: flex;
      gap: 18px;
      justify-content: center;
      margin-bottom: 28px;
      flex-wrap: wrap
    }

    .litem {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 13px;
      color: var(--text2)
    }

    .ldot {
      width: 13px;
      height: 13px;
      border-radius: 3px
    }

    .bksumm {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 22px;
      margin-bottom: 20px
    }

    .bkrow {
      display: flex;
      justify-content: space-between;
      margin-bottom: 7px;
      font-size: 14px;
      color: var(--text2)
    }

    .bktotal {
      display: flex;
      justify-content: space-between;
      font-size: 19px;
      font-weight: 700;
      color: var(--text);
      border-top: 1px solid var(--border);
      padding-top: 11px;
      margin-top: 7px
    }

    .datebtnrow {
      display: flex;
      gap: 7px;
      flex-wrap: wrap;
      margin-bottom: 20px
    }

    .datebtn {
      background: var(--bg3);
      border: 1px solid var(--border);
      color: var(--text2);
      padding: 7px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 12px;
      font-family: 'DM Sans', sans-serif;
      transition: all var(--transition);
      text-align: center;
      min-width: 58px
    }

    .datebtn:hover,
    .datebtn.act {
      background: var(--accent);
      border-color: var(--accent);
      color: #000;
      font-weight: 600
    }

    .dday {
      display: block;
      font-size: 10px;
      text-transform: uppercase
    }

    .dnum {
      display: block;
      font-size: 18px;
      font-weight: 700
    }

    .tkcnt {
      display: flex;
      align-items: center;
      justify-content: space-between
    }

    .tkcntbtns {
      display: flex;
      align-items: center;
      gap: 11px
    }

    .cnbtn {
      background: var(--bg2);
      border: 1px solid var(--border);
      color: var(--text);
      width: 30px;
      height: 30px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 17px;
      font-family: 'DM Sans', sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all var(--transition)
    }

    .cnbtn:hover {
      background: var(--border)
    }

    .cnnum {
      font-size: 19px;
      font-weight: 700;
      min-width: 22px;
      text-align: center
    }

    /* PAYMENT */
    .pgrid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px
    }

    .pfull {
      grid-column: 1/-1
    }

    /* ORDERS */
    .ordgrid {
      display: flex;
      flex-direction: column;
      gap: 14px
    }

    .ordcard {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 18px;
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 14px;
      align-items: center
    }

    .ordpost {
      width: 55px;
      height: 83px;
      border-radius: 7px;
      object-fit: cover
    }

    .ordst {
      font-size: 12px;
      font-weight: 600;
      padding: 3px 9px;
      border-radius: 999px
    }

    .ordst.conf {
      background: rgba(76, 175, 125, .2);
      color: var(--success)
    }

    /* ADMIN */
    .atabs {
      display: flex;
      gap: 3px;
      border-bottom: 1px solid var(--border);
      margin-bottom: 28px
    }

    .atab {
      background: none;
      border: none;
      color: var(--text2);
      cursor: pointer;
      padding: 11px 18px;
      font-size: 14px;
      font-weight: 500;
      font-family: 'DM Sans', sans-serif;
      border-bottom: 2px solid transparent;
      transition: all var(--transition);
      margin-bottom: -1px
    }

    .atab:hover {
      color: var(--text)
    }

    .atab.act {
      color: var(--accent);
      border-bottom-color: var(--accent)
    }

    .atable {
      width: 100%;
      border-collapse: collapse
    }

    .atable th,
    .atable td {
      text-align: left;
      padding: 11px 14px;
      border-bottom: 1px solid var(--border);
      font-size: 14px
    }

    .atable th {
      color: var(--text2);
      font-weight: 600;
      text-transform: uppercase;
      font-size: 11px;
      letter-spacing: 1px
    }

    .atable tr:hover td {
      background: var(--bg3)
    }

    /* MODAL */
    .movl {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, .8);
      backdrop-filter: blur(4px);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px
    }

    .modal {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 30px;
      width: 100%;
      max-width: 480px;
      max-height: 90vh;
      overflow-y: auto
    }

    .modal-t {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 26px;
      letter-spacing: 1px;
      margin-bottom: 18px
    }

    /* STARS */
    .stars {
      display: flex;
      gap: 3px
    }

    .star {
      cursor: pointer;
      font-size: 22px;
      color: var(--text3);
      transition: color var(--transition)
    }

    .star.f,
    .star:hover~.star {
      color: var(--accent)
    }

    /* MISC */
    .divider {
      height: 1px;
      background: var(--border);
      margin: 20px 0
    }

    .tm {
      color: var(--text2)
    }

    .ta {
      color: var(--accent)
    }

    .fb {
      display: flex
    }

    .fc {
      display: flex;
      align-items: center;
      justify-content: center
    }

    .fbet {
      display: flex;
      align-items: center;
      justify-content: space-between
    }

    .g8 {
      gap: 8px
    }

    .g16 {
      gap: 16px
    }

    .mb8 {
      margin-bottom: 8px
    }

    .mb16 {
      margin-bottom: 16px
    }

    .mb24 {
      margin-bottom: 24px
    }

    .mt16 {
      margin-top: 16px
    }

    .suc-ov {
      text-align: center;
      padding: 36px
    }

    .suc-ic {
      font-size: 62px;
      margin-bottom: 14px;
      animation: pop .4s ease
    }

    @keyframes pop {
      from {
        transform: scale(0)
      }

      to {
        transform: scale(1)
      }
    }

    .emp {
      text-align: center;
      padding: 72px 20px
    }

    .emp-ic {
      font-size: 60px;
      margin-bottom: 14px;
      opacity: .3
    }

    .emp h3 {
      font-size: 19px;
      color: var(--text2);
      margin-bottom: 7px
    }

    .emp p {
      color: var(--text3);
      font-size: 14px
    }

    .acc-den {
      text-align: center;
      padding: 72px 20px
    }

    .acc-ic {
      font-size: 76px;
      margin-bottom: 18px
    }

    @media(max-width:768px) {
      .mdcnt {
        grid-template-columns: 1fr
      }

      .mdposter {
        max-width: 190px
      }

      .pgrid {
        grid-template-columns: 1fr
      }

      .ordcard {
        grid-template-columns: auto 1fr
      }

      .footer-grid {
        grid-template-columns: 1fr 1fr !important
      }
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useContext, createContext, useCallback } = React;

    // â”€â”€ MOCK DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const TEST_USERS = [
      { id: 1, email: "user1@test.com", password: "123456", name: "Alice Cohen", role: "user", locked: false },
      { id: 2, email: "user2@test.com", password: "123456", name: "Bob Levi", role: "user", locked: false },
      { id: 3, email: "admin@test.com", password: "admin123", name: "Admin User", role: "admin", locked: false },
      { id: 4, email: "locked@test.com", password: "123456", name: "Locked User", role: "user", locked: true },
    ];

    const INIT_MOVIES = [
      // â”€â”€ NOW PLAYING â€” blockbusters in style of 2024-2025 â”€â”€
      {
        id: 1, title: "Thunderbolts*", genre: "Action", rating: 7.6, duration: 126,
        poster: "https://images.unsplash.com/photo-1635805737707-575885ab0820?w=300&q=80",
        description: "A ragtag group of antiheroes and reformed villains are reluctantly assembled by a shadowy government agency for a suicide mission â€” only to discover they're being set up as scapegoats.",
        cast: ["Florence Pugh", "Sebastian Stan", "David Harbour", "Julia Louis-Dreyfus"], year: 2025,
        showtimes: ["10:00", "13:00", "16:00", "19:00", "22:00"], userRatings: [{ userId: 1, rating: 4 }], isFeatured: true,
        tagline: "No heroes. No rules. No mercy.", badge: "NOW SHOWING"
      },

      {
        id: 2, title: "Mission: Impossible â€” The Final Reckoning", genre: "Action", rating: 8.1, duration: 169,
        poster: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=300&q=80",
        description: "Ethan Hunt and his IMF team race against time to track down a terrifying new weapon that threatens all of humanity before it falls into the wrong hands â€” in what may be their final mission.",
        cast: ["Tom Cruise", "Hayley Atwell", "Ving Rhames", "Simon Pegg", "Pom Klementieff"], year: 2025,
        showtimes: ["09:30", "12:45", "16:15", "19:30", "22:30"], userRatings: [{ userId: 2, rating: 5 }], isFeatured: true,
        tagline: "Every mission has an end.", badge: "NOW SHOWING"
      },

      {
        id: 3, title: "Sinners", genre: "Horror", rating: 7.9, duration: 137,
        poster: "https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=300&q=80",
        description: "Twin brothers return to their Mississippi Delta hometown in 1932 hoping to leave their troubled lives behind, only to discover that an even greater evil awaits them.",
        cast: ["Michael B. Jordan", "Hailee Steinfeld", "Jack O'Connell", "Wunmi Mosaku"], year: 2025,
        showtimes: ["11:30", "14:30", "17:30", "20:30", "23:00"], userRatings: [{ userId: 1, rating: 4 }], isFeatured: true,
        tagline: "Sin never sleeps.", badge: "NOW SHOWING"
      },

      {
        id: 4, title: "A Minecraft Movie", genre: "Animation", rating: 6.8, duration: 101,
        poster: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=300&q=80",
        description: "Four unlikely heroes are pulled through a mysterious portal into the Overworld â€” a bizarre, cubic wonderland that thrives on imagination. To get back home, they must master the art of crafting, building, and surviving.",
        cast: ["Jason Momoa", "Jack Black", "Emma Myers", "Jennifer Coolidge"], year: 2025,
        showtimes: ["10:00", "12:00", "14:00", "16:00", "18:00"], userRatings: [], isFeatured: false,
        tagline: "Based on the game played by billions.", badge: "NOW SHOWING"
      },

      {
        id: 5, title: "The Accountant 2", genre: "Thriller", rating: 7.3, duration: 129,
        poster: "https://images.unsplash.com/photo-1478720568477-152d9b164e26?w=300&q=80",
        description: "Christian Wolff, a mathematical genius and lethal assassin, comes out of the shadows when a former client is targeted by a ruthless international crime syndicate.",
        cast: ["Ben Affleck", "Jon Bernthal", "J.K. Simmons", "Daniella Pineda"], year: 2025,
        showtimes: ["11:00", "14:00", "17:00", "20:00", "22:45"], userRatings: [], isFeatured: false,
        tagline: "The numbers never lie.", badge: "NOW SHOWING"
      },

      {
        id: 6, title: "Snow White", genre: "Adventure", rating: 5.4, duration: 110,
        poster: "https://images.unsplash.com/photo-1551632436-cbf8dd35adfa?w=300&q=80",
        description: "The timeless tale of Snow White is reimagined in a live-action spectacular â€” a young princess flees an evil queen's wrath and finds courage, magic, and her destiny among seven extraordinary companions.",
        cast: ["Rachel Zegler", "Gal Gadot", "Andrew Burnap"], year: 2025,
        showtimes: ["10:30", "13:00", "15:30", "18:00", "20:30"], userRatings: [], isFeatured: false,
        tagline: "The fairest of them all.", badge: "NOW SHOWING"
      },

      {
        id: 7, title: "Opus", genre: "Thriller", rating: 6.9, duration: 104,
        poster: "https://images.unsplash.com/photo-1485846234645-a62644f84728?w=300&q=80",
        description: "A reclusive pop icon invites a group of journalists to his isolated desert compound for an exclusive comeback event â€” but as the weekend unfolds, the guests realize they may never leave.",
        cast: ["Ayo Edebiri", "John Malkovich", "Juliette Lewis", "Murray Bartlett"], year: 2025,
        showtimes: ["13:30", "16:30", "19:30", "22:30"], userRatings: [{ userId: 2, rating: 3 }], isFeatured: false,
        tagline: "Fame has a price.", badge: "NOW SHOWING"
      },

      {
        id: 8, title: "Until Dawn", genre: "Horror", rating: 6.5, duration: 103,
        poster: "https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?w=300&q=80",
        description: "Based on the hit interactive game: a group of friends visit a remote mountain lodge and find themselves trapped in a terrifying loop â€” dying over and over, each time more brutally than the last.",
        cast: ["Ella Rubin", "Michael Cimino", "Peter Stormare", "Odessa A'zion"], year: 2025,
        showtimes: ["14:00", "17:00", "20:00", "22:30"], userRatings: [], isFeatured: false,
        tagline: "Every death is just the beginning.", badge: "NOW SHOWING"
      },

      // â”€â”€ COMING SOON â”€â”€
      {
        id: 9, title: "Superman", genre: "Action", rating: 0, duration: 129,
        poster: "https://images.unsplash.com/photo-1618336753974-aae8e04506aa?w=300&q=80",
        description: "Clark Kent balances his life as both an ordinary journalist and the world's greatest superhero, while a new threat emerges that will test the very limits of what it means to be Superman.",
        cast: ["David Corenswet", "Rachel Brosnahan", "Nicholas Hoult", "Edi Gathegi"], year: 2025,
        showtimes: ["11:00", "14:30", "18:00", "21:30"], userRatings: [], isFeatured: true,
        tagline: "Truth. Justice. A better tomorrow.", badge: "COMING SOON"
      },

      {
        id: 10, title: "Avatar: Fire and Ash", genre: "Sci-Fi", rating: 0, duration: 155,
        poster: "https://images.unsplash.com/photo-1446776877081-d282a0f896e2?w=300&q=80",
        description: "Jake Sully and Neytiri face a devastating new threat on Pandora when a militant clan wielding the power of fire and volcanic fury arrives, reshaping the fate of Na'vi civilization forever.",
        cast: ["Sam Worthington", "Zoe Saldana", "Sigourney Weaver", "Stephen Lang"], year: 2025,
        showtimes: ["10:00", "13:30", "17:00", "20:30"], userRatings: [], isFeatured: true,
        tagline: "The fire within.", badge: "COMING SOON"
      },

      {
        id: 11, title: "Jurassic World Rebirth", genre: "Adventure", rating: 0, duration: 118,
        poster: "https://images.unsplash.com/photo-1518020382113-a7e8fc38eac9?w=300&q=80",
        description: "Five years after the collapse of the Jurassic World system, dinosaurs that can no longer survive in the current climate struggle for survival while a covert mission attempts to retrieve their DNA.",
        cast: ["Scarlett Johansson", "Mahershala Ali", "Jonathan Bailey", "Rupert Friend"], year: 2025,
        showtimes: ["10:30", "13:30", "16:30", "19:30", "22:30"], userRatings: [], isFeatured: false,
        tagline: "Life finds a new way.", badge: "COMING SOON"
      },

      {
        id: 12, title: "The Fantastic Four: First Steps", genre: "Action", rating: 0, duration: 125,
        poster: "https://images.unsplash.com/photo-1504701954957-2010ec3bcec1?w=300&q=80",
        description: "Marvel's First Family â€” Reed Richards, Sue Storm, Johnny Storm, and Ben Grimm â€” step out of the shadows and into the spotlight as they take on their first world-threatening cosmic crisis.",
        cast: ["Pedro Pascal", "Vanessa Kirby", "Ebon Moss-Bachrach", "Joseph Quinn"], year: 2025,
        showtimes: ["11:00", "14:00", "17:00", "20:00", "22:45"], userRatings: [], isFeatured: false,
        tagline: "Change is coming.", badge: "COMING SOON"
      },

      {
        id: 13, title: "The Phoenician Scheme", genre: "Adventure", rating: 0, duration: 112,
        poster: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=300&q=80",
        description: "Wes Anderson's latest whimsical odyssey follows an eccentric billionaire and his estranged daughter as they unravel a decades-old conspiracy spanning ancient Mediterranean civilizations.",
        cast: ["Benicio del Toro", "Michael Cera", "Tom Hanks", "Scarlett Johansson", "Bryan Cranston"], year: 2025,
        showtimes: ["12:00", "15:00", "18:00", "21:00"], userRatings: [], isFeatured: false,
        tagline: "Every treasure has a secret.", badge: "COMING SOON"
      },

      {
        id: 14, title: "28 Years Later", genre: "Horror", rating: 0, duration: 115,
        poster: "https://images.unsplash.com/photo-1534447677768-be436bb09401?w=300&q=80",
        description: "Nearly three decades after the Rage virus devastated Britain, a community of survivors living on a causeway sends one of their own to the mainland â€” where a shocking new discovery awaits.",
        cast: ["Jodie Comer", "Aaron Taylor-Johnson", "Ralph Fiennes", "Cillian Murphy"], year: 2025,
        showtimes: ["13:00", "16:30", "20:00", "22:45"], userRatings: [], isFeatured: false,
        tagline: "The rage never died.", badge: "COMING SOON"
      },

      {
        id: 15, title: "Materialists", genre: "Romance", rating: 0, duration: 98,
        poster: "https://images.unsplash.com/photo-1518895949257-7621c3c786d7?w=300&q=80",
        description: "A high-end matchmaker for Manhattan's ultra-wealthy finds her own heart hopelessly divided between her pragmatic ex and an unexpected romantic contender from her past.",
        cast: ["Dakota Johnson", "Chris Evans", "Pedro Pascal"], year: 2025,
        showtimes: ["12:30", "15:30", "18:30", "21:00"], userRatings: [], isFeatured: false,
        tagline: "Love doesn't come with a price tag.", badge: "COMING SOON"
      },

      {
        id: 16, title: "Elio", genre: "Animation", rating: 0, duration: 103,
        poster: "https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=300&q=80",
        description: "A dreamy, space-obsessed kid is accidentally transported to the Communiverse â€” a galaxy of alien civilizations â€” and is mistaken for Earth's ambassador, forcing him to represent all of humanity.",
        cast: ["Yonas Kibreab", "Zoe Saldana", "Ramy Youssef", "Brad Garrett"], year: 2025,
        showtimes: ["10:00", "12:00", "14:00", "16:00", "18:00"], userRatings: [], isFeatured: false,
        tagline: "One small kid. One giant universe.", badge: "COMING SOON"
      },

      // â”€â”€ RECENT HITS (still in rotation) â”€â”€
      {
        id: 17, title: "Wicked", genre: "Drama", rating: 8.3, duration: 160,
        poster: "https://images.unsplash.com/photo-1507838153414-b4b713384a76?w=300&q=80",
        description: "The untold story of the witches of Oz: Elphaba, a misunderstood young woman with extraordinary powers, and Glinda, a popular young woman. Their unlikely friendship is tested by their diverging destinies.",
        cast: ["Cynthia Erivo", "Ariana Grande", "Jeff Goldblum", "Jonathan Bailey"], year: 2024,
        showtimes: ["11:30", "15:00", "18:30", "22:00"], userRatings: [{ userId: 1, rating: 5 }, { userId: 2, rating: 4 }], isFeatured: true,
        tagline: "What's more wicked â€” being different, or pretending not to be?", badge: "EXTENDED RUN"
      },

      {
        id: 18, title: "Conclave", genre: "Thriller", rating: 7.8, duration: 120,
        poster: "https://images.unsplash.com/photo-1509347528160-9a9e33742cdb?w=300&q=80",
        description: "Following the sudden death of the Pope, Cardinal Lawrence oversees a tense election as shocking revelations about the candidates threaten to shake the Church to its core.",
        cast: ["Ralph Fiennes", "Stanley Tucci", "John Lithgow", "Isabella Rossellini"], year: 2024,
        showtimes: ["13:00", "16:30", "20:00"], userRatings: [{ userId: 2, rating: 4 }], isFeatured: false,
        tagline: "Power. Secrets. Faith.", badge: "EXTENDED RUN"
      },

      {
        id: 19, title: "A Complete Unknown", genre: "Drama", rating: 8.0, duration: 141,
        poster: "https://images.unsplash.com/photo-1470813740244-df37b8c1edcb?w=300&q=80",
        description: "New York, 1961. A 19-year-old Bob Dylan arrives with nothing but his guitar and a burning ambition. In just four years, he transforms American music and then shocks his fans by going electric.",
        cast: ["TimothÃ©e Chalamet", "Elle Fanning", "Edward Norton", "Monica Barbaro"], year: 2024,
        showtimes: ["12:30", "16:00", "19:30"], userRatings: [{ userId: 1, rating: 4 }], isFeatured: false,
        tagline: "His music changed the world. His story will surprise you.", badge: "EXTENDED RUN"
      },

      {
        id: 20, title: "Nosferatu", genre: "Horror", rating: 7.5, duration: 132,
        poster: "https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?w=300&q=80",
        description: "A gothic reimagining of F.W. Murnau's 1922 masterpiece. A young woman in 1830s Germany becomes haunted by a terrifying ancient vampire, Count Orlok, who has become obsessed with her.",
        cast: ["Bill SkarsgÃ¥rd", "Lily-Rose Depp", "Nicholas Hoult", "Aaron Taylor-Johnson", "Willem Dafoe"], year: 2024,
        showtimes: ["15:30", "18:30", "21:30", "23:45"], userRatings: [], isFeatured: false,
        tagline: "Some loves are eternal. Some evils are immortal.", badge: "EXTENDED RUN"
      },

      {
        id: 21, title: "Emilia PÃ©rez", genre: "Drama", rating: 8.1, duration: 132,
        poster: "https://images.unsplash.com/photo-1589829545856-d10d557cf95f?w=300&q=80",
        description: "A Mexican lawyer is hired to help a cartel boss fake his death so he can fulfill his lifelong dream of transitioning â€” all while the lawyer falls deeper into a web of secrets, love, and danger.",
        cast: ["Karla SofÃ­a GascÃ³n", "Zoe Saldana", "Selena Gomez", "Edgar RamÃ­rez"], year: 2024,
        showtimes: ["13:30", "17:00", "20:30"], userRatings: [{ userId: 1, rating: 5 }], isFeatured: false,
        tagline: "She had to die to truly live.", badge: "EXTENDED RUN"
      },

      {
        id: 22, title: "The Brutalist", genre: "Drama", rating: 8.7, duration: 215,
        poster: "https://images.unsplash.com/photo-1497366216548-37526070297c?w=300&q=80",
        description: "A sweeping, three-and-a-half-hour epic following a Hungarian-Jewish architect who flees post-war Europe for America, where he struggles to rebuild his career while confronting loss, ambition, addiction, and the American Dream.",
        cast: ["Adrien Brody", "Felicity Jones", "Guy Pearce", "Joe Alwyn"], year: 2024,
        showtimes: ["11:00", "17:30"], userRatings: [{ userId: 2, rating: 5 }], isFeatured: false,
        tagline: "A monument to survival.", badge: "EXTENDED RUN"
      },

      {
        id: 23, title: "Anora", genre: "Romance", rating: 8.0, duration: 139,
        poster: "https://images.unsplash.com/photo-1474552226712-ac0f0961a954?w=300&q=80",
        description: "A young sex worker from Brooklyn marries the son of a Russian oligarch on a whim â€” but when the family finds out and arrives to annul the marriage, her fairy tale unravels in ways she never imagined.",
        cast: ["Mikey Madison", "Yura Borisov", "Karren Karagulian", "Vache Tovmasyan"], year: 2024,
        showtimes: ["12:00", "15:30", "19:00", "22:30"], userRatings: [{ userId: 1, rating: 4 }], isFeatured: false,
        tagline: "A Cinderella story for the real world.", badge: "EXTENDED RUN"
      },

      {
        id: 24, title: "Alien: Romulus", genre: "Sci-Fi", rating: 7.3, duration: 119,
        poster: "https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=300&q=80",
        description: "Set between the events of Alien and Aliens, a group of young colonists scavenging the deep reaches of space come face to face with the most terrifying life form in the universe.",
        cast: ["Cailee Spaeny", "David Jonsson", "Archie Renaux", "Isabela Merced"], year: 2024,
        showtimes: ["14:30", "18:00", "21:30", "23:30"], userRatings: [], isFeatured: false,
        tagline: "Do not run. You cannot hide.", badge: "EXTENDED RUN"
      },

      {
        id: 25, title: "Gladiator II", genre: "Action", rating: 7.2, duration: 148,
        poster: "https://images.unsplash.com/photo-1504701954957-2010ec3bcec1?w=300&q=80",
        description: "Years after Maximus's death, a young man named Lucius is thrust into the violent world of the Roman Colosseum. As he fights for survival, he discovers a shocking connection to the past.",
        cast: ["Paul Mescal", "Denzel Washington", "Pedro Pascal", "Connie Nielsen", "Joseph Quinn"], year: 2024,
        showtimes: ["11:00", "14:30", "18:00", "21:30"], userRatings: [{ userId: 2, rating: 4 }], isFeatured: false,
        tagline: "Power demands sacrifice.", badge: "EXTENDED RUN"
      },

      {
        id: 26, title: "Dune: Part Two", genre: "Sci-Fi", rating: 8.5, duration: 167,
        poster: "https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=300&q=80",
        description: "Paul Atreides unites with the Fremen while on a warpath of revenge against the conspirators who destroyed his family. Facing a choice between the love of his life and the fate of the known universe.",
        cast: ["TimothÃ©e Chalamet", "Zendaya", "Rebecca Ferguson", "Austin Butler", "Florence Pugh"], year: 2024,
        showtimes: ["11:30", "15:00", "18:30", "22:00"], userRatings: [{ userId: 1, rating: 5 }, { userId: 2, rating: 5 }], isFeatured: false,
        tagline: "Long live the fighters.", badge: "EXTENDED RUN"
      },

      {
        id: 27, title: "Inside Out 2", genre: "Animation", rating: 7.9, duration: 100,
        poster: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=300&q=80",
        description: "Riley is now a teenager and Joy and the other Emotions must make room for a new, complicated emotion â€” Anxiety â€” who isn't sure she'll be welcomed.",
        cast: ["Amy Poehler", "Maya Hawke", "Kensington Tallman", "Liza Lapira", "Tony Hale"], year: 2024,
        showtimes: ["10:00", "12:30", "15:00", "17:30", "20:00"], userRatings: [{ userId: 1, rating: 4 }], isFeatured: false,
        tagline: "New emotions. New adventures.", badge: "EXTENDED RUN"
      },

      {
        id: 28, title: "Twisters", genre: "Adventure", rating: 7.2, duration: 122,
        poster: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&q=80",
        description: "Kate Cooper, a former storm chaser haunted by a devastating encounter, is lured back to the open plains of Oklahoma to test a new tracking system. She crosses paths with a reckless social-media daredevil.",
        cast: ["Daisy Edgar-Jones", "Glen Powell", "Anthony Ramos", "Brandon Perea"], year: 2024,
        showtimes: ["10:30", "13:30", "16:30", "19:30", "22:30"], userRatings: [{ userId: 2, rating: 3 }], isFeatured: false,
        tagline: "Nature always wins.", badge: "EXTENDED RUN"
      },

      {
        id: 29, title: "Deadpool & Wolverine", genre: "Action", rating: 7.8, duration: 128,
        poster: "https://images.unsplash.com/photo-1635805737707-575885ab0820?w=300&q=80",
        description: "Deadpool is recruited by the Time Variance Authority and brought into the MCU, where he unexpectedly teams up with a reluctant, battle-scarred Wolverine to face an existential threat.",
        cast: ["Ryan Reynolds", "Hugh Jackman", "Emma Corrin", "Matthew Macfadyen", "Jennifer Garner"], year: 2024,
        showtimes: ["11:00", "14:00", "17:00", "20:00", "22:45"], userRatings: [{ userId: 1, rating: 4 }, { userId: 2, rating: 4 }], isFeatured: false,
        tagline: "Come together.", badge: "EXTENDED RUN"
      },

      {
        id: 30, title: "Longlegs", genre: "Thriller", rating: 6.8, duration: 101,
        poster: "https://images.unsplash.com/photo-1516912481808-3406841bd33c?w=300&q=80",
        description: "FBI Agent Lee Harker is assigned to a serial killer case that becomes increasingly personal â€” the deeper she digs into the murders, the more she fears she may have a link to the killer herself.",
        cast: ["Maika Monroe", "Nicolas Cage", "Blair Underwood", "Alicia Witt"], year: 2024,
        showtimes: ["14:30", "18:00", "21:00", "23:00"], userRatings: [], isFeatured: false,
        tagline: "Evil wears many faces.", badge: "EXTENDED RUN"
      },

      {
        id: 31, title: "The Wild Robot", genre: "Animation", rating: 8.4, duration: 102,
        poster: "https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=300&q=80",
        description: "A robot is shipwrecked on a wild island and must learn to survive in a harsh environment. After accidentally becoming the parent of an orphaned gosling, she begins adapting to her new home.",
        cast: ["Lupita Nyong'o", "Pedro Pascal", "Kit Connor", "Bill Nighy", "Mark Hamill"], year: 2024,
        showtimes: ["10:00", "12:30", "15:00", "17:30"], userRatings: [{ userId: 1, rating: 5 }], isFeatured: false,
        tagline: "What does it mean to be alive?", badge: "EXTENDED RUN"
      },

      {
        id: 32, title: "Speak No Evil", genre: "Thriller", rating: 7.4, duration: 110,
        poster: "https://images.unsplash.com/photo-1494976388531-d1058494cdd8?w=300&q=80",
        description: "An American family accepts a British couple's invitation to spend a weekend at their idyllic countryside home. But as the stay progresses, their welcoming hosts begin revealing a terrifying true nature.",
        cast: ["James McAvoy", "Mackenzie Davis", "Scoot McNairy", "Aisling Franciosi"], year: 2024,
        showtimes: ["13:00", "16:00", "19:00", "21:45"], userRatings: [{ userId: 2, rating: 4 }], isFeatured: false,
        tagline: "Politeness can be deadly.", badge: "EXTENDED RUN"
      },

      {
        id: 33, title: "Challengers", genre: "Drama", rating: 7.6, duration: 131,
        poster: "https://images.unsplash.com/photo-1502602898657-3e91760cbb34?w=300&q=80",
        description: "Tashi Duncan, a former tennis prodigy turned coach, transformed both her husband and her ex-best friend into champions. When they face each other at a small tournament, tensions ignite into a love triangle.",
        cast: ["Zendaya", "Josh O'Connor", "Mike Faist"], year: 2024,
        showtimes: ["12:00", "15:00", "18:00", "21:00"], userRatings: [{ userId: 1, rating: 4 }], isFeatured: false,
        tagline: "Game. Set. Obsession.", badge: "EXTENDED RUN"
      },

      {
        id: 34, title: "Beetlejuice Beetlejuice", genre: "Comedy", rating: 7.1, duration: 104,
        poster: "https://images.unsplash.com/photo-1517604931442-7e0c8ed2963c?w=300&q=80",
        description: "Following an unexpected family tragedy, three generations of the Deetz family return home to Winter River â€” and it isn't long before accidental mischief results in the unwitting resurrection of Betelgeuse.",
        cast: ["Michael Keaton", "Winona Ryder", "Catherine O'Hara", "Jenna Ortega", "Justin Theroux", "Monica Bellucci"], year: 2024,
        showtimes: ["11:30", "14:30", "17:30", "20:30", "23:00"], userRatings: [{ userId: 2, rating: 3 }], isFeatured: false,
        tagline: "It's showtime... again.", badge: "EXTENDED RUN"
      },

      // â”€â”€ MORE NOW SHOWING â”€â”€
      {
        id: 35, title: "Fight or Flight", genre: "Action", rating: 6.9, duration: 98,
        poster: "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=300&q=80",
        description: "An elite assassin is tasked with protecting the one man who can bring down her entire criminal organisation â€” and the mission goes sideways from the moment they board the plane.",
        cast: ["Josh Hartnett", "Walton Goggins", "Pippa Bennett-Warner"], year: 2025,
        showtimes: ["12:00", "15:00", "18:00", "21:00", "23:30"], userRatings: [], isFeatured: false,
        tagline: "No exit. No mercy.", badge: "NOW SHOWING"
      },

      {
        id: 36, title: "The Housemaid", genre: "Thriller", rating: 7.2, duration: 112,
        poster: "https://images.unsplash.com/photo-1494976388531-d1058494cdd8?w=300&q=80",
        description: "A destitute young woman takes a housekeeping job at a wealthy family's remote mansion, only to discover the husband is dangerously obsessed with her and the wife is hiding a terrifying secret.",
        cast: ["Sydney Sweeney", "Amanda Seyfried", "Brandon Sklenar"], year: 2025,
        showtimes: ["11:00", "14:00", "17:00", "20:00", "22:30"], userRatings: [{ userId: 1, rating: 4 }], isFeatured: false,
        tagline: "Some doors should never be opened.", badge: "NOW SHOWING"
      },

      {
        id: 37, title: "Final Destination: Bloodlines", genre: "Horror", rating: 6.7, duration: 110,
        poster: "https://images.unsplash.com/photo-1509248961158-e54f6934749c?w=300&q=80",
        description: "A college student is haunted by recurring visions of a terrifying disaster. After saving her family, Death begins picking them off one by one in increasingly elaborate and gruesome ways.",
        cast: ["Kaitlyn Santa Juana", "Teo Briones", "Tony Todd"], year: 2025,
        showtimes: ["13:00", "16:00", "19:00", "21:30", "23:45"], userRatings: [], isFeatured: false,
        tagline: "Death has a new design.", badge: "NOW SHOWING"
      },

      {
        id: 38, title: "Ballerina", genre: "Action", rating: 7.4, duration: 120,
        poster: "https://images.unsplash.com/photo-1635805737707-575885ab0820?w=300&q=80",
        description: "Set in the John Wick universe: a young female assassin seeks vengeance against the mercenary organization that killed her family. She trains with deadly precision and dances through a world of lethal elegance.",
        cast: ["Ana de Armas", "Keanu Reeves", "Ian McShane", "Anjelica Huston"], year: 2025,
        showtimes: ["10:30", "13:30", "16:30", "19:30", "22:15"], userRatings: [{ userId: 2, rating: 4 }], isFeatured: false,
        tagline: "Grace under fire.", badge: "NOW SHOWING"
      },

      {
        id: 39, title: "How to Train Your Dragon", genre: "Adventure", rating: 7.8, duration: 110,
        poster: "https://images.unsplash.com/photo-1551632436-cbf8dd35adfa?w=300&q=80",
        description: "Live-action reimagining of the beloved animated classic â€” a young Viking outcast forms an unlikely bond with a wounded dragon and must fight to save both their worlds from destruction.",
        cast: ["Mason Thames", "Nico Parker", "Gerard Butler", "Julian Dennison"], year: 2025,
        showtimes: ["10:00", "12:30", "15:00", "17:30", "20:00"], userRatings: [{ userId: 1, rating: 4 }], isFeatured: false,
        tagline: "A friendship that will change everything.", badge: "NOW SHOWING"
      },

      {
        id: 40, title: "Mickey 17", genre: "Sci-Fi", rating: 7.1, duration: 137,
        poster: "https://images.unsplash.com/photo-1446776877081-d282a0f896e2?w=300&q=80",
        description: "An 'expendable' worker on a mission to colonize an ice planet keeps dying and being reprinted â€” until number 17 meets his replacement, number 18, and refuses to accept his fate.",
        cast: ["Robert Pattinson", "Naomi Ackie", "Steven Yeun", "Mark Ruffalo", "Toni Collette"], year: 2025,
        showtimes: ["11:30", "14:30", "17:30", "20:30"], userRatings: [{ userId: 2, rating: 3 }], isFeatured: false,
        tagline: "What does it mean to be you?", badge: "NOW SHOWING"
      },

      // â”€â”€ MORE COMING SOON â”€â”€
      {
        id: 41, title: "Mission: Impossible 8 â€” Dead Reckoning Part Two", genre: "Action", rating: 0, duration: 163,
        poster: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=300&q=80",
        description: "The thrilling conclusion to the two-part saga. Ethan Hunt faces his most impossible mission yet as the AI Entity reaches its full power and threatens to rewrite reality itself.",
        cast: ["Tom Cruise", "Hayley Atwell", "Ving Rhames", "Simon Pegg", "Vanessa Kirby"], year: 2025,
        showtimes: ["10:00", "13:30", "17:00", "20:30"], userRatings: [], isFeatured: false,
        tagline: "This is the end.", badge: "COMING SOON"
      },

      {
        id: 42, title: "Zootopia 2", genre: "Animation", rating: 0, duration: 108,
        poster: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=300&q=80",
        description: "Judy Hopps and Nick Wilde return to crack an even bigger case â€” a mysterious new predator is threatening to reverse all the progress Zootopia has made toward harmony between species.",
        cast: ["Ginnifer Goodwin (voice)", "Jason Bateman (voice)", "Idris Elba (voice)"], year: 2025,
        showtimes: ["10:00", "12:00", "14:00", "16:00", "18:00"], userRatings: [], isFeatured: false,
        tagline: "The city needs its finest.", badge: "COMING SOON"
      },

      {
        id: 43, title: "The Running Man", genre: "Sci-Fi", rating: 0, duration: 118,
        poster: "https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=300&q=80",
        description: "In a dystopian near-future America, a wrongly convicted man must survive a live television game show where convicts are hunted down by professional killers for public entertainment.",
        cast: ["Glen Powell", "Katy O'Brian", "Josh Brolin"], year: 2025,
        showtimes: ["12:30", "16:00", "19:30", "22:30"], userRatings: [], isFeatured: false,
        tagline: "The game begins.", badge: "COMING SOON"
      },

      {
        id: 44, title: "Freakier Friday", genre: "Comedy", rating: 0, duration: 105,
        poster: "https://images.unsplash.com/photo-1517604931442-7e0c8ed2963c?w=300&q=80",
        description: "Anna and her daughter have swapped bodies again â€” but this time the whole blended family gets caught up in the chaos, including step-siblings and a new partner who has no idea what's happening.",
        cast: ["Lindsay Lohan", "Jamie Lee Curtis", "Mark Harmon", "Chad Michael Murray"], year: 2025,
        showtimes: ["11:00", "13:30", "16:00", "18:30", "21:00"], userRatings: [], isFeatured: false,
        tagline: "Same family. Total chaos.", badge: "COMING SOON"
      },

      {
        id: 45, title: "Eddington", genre: "Thriller", rating: 0, duration: 125,
        poster: "https://images.unsplash.com/photo-1516912481808-3406841bd33c?w=300&q=80",
        description: "Set during the early days of the COVID-19 pandemic in a small New Mexico town, a sheriff and mayor with conflicting worldviews clash in ways that tear the community apart at the seams.",
        cast: ["Joaquin Phoenix", "Pedro Pascal", "Emma Stone", "Austin Butler", "Luke Grimes"], year: 2025,
        showtimes: ["13:30", "17:00", "20:30"], userRatings: [], isFeatured: false,
        tagline: "Every town has a breaking point.", badge: "COMING SOON"
      },

      {
        id: 46, title: "Predator: Badlands", genre: "Sci-Fi", rating: 0, duration: 115,
        poster: "https://images.unsplash.com/photo-1470813740244-df37b8c1edcb?w=300&q=80",
        description: "On an alien world far from Earth, a female Predator defies her clan's traditions and forms an uneasy alliance with the very prey she was sent to hunt in order to survive a greater threat.",
        cast: ["Elle Fanning", "Michelle Yeoh"], year: 2025,
        showtimes: ["11:30", "14:30", "17:30", "20:30", "23:00"], userRatings: [], isFeatured: false,
        tagline: "The hunt evolves.", badge: "COMING SOON"
      },

      {
        id: 47, title: "Untitled Knives Out 3", genre: "Thriller", rating: 0, duration: 130,
        poster: "https://images.unsplash.com/photo-1485846234645-a62644f84728?w=300&q=80",
        description: "Master detective Benoit Blanc is drawn into his most labyrinthine mystery yet â€” a locked-room murder aboard a luxury trans-Siberian train where every passenger is equally suspicious.",
        cast: ["Daniel Craig", "Josh O'Connor", "Andrew Garfield", "Glenn Close", "Kerry Washington"], year: 2025,
        showtimes: ["12:00", "15:00", "18:00", "21:00"], userRatings: [], isFeatured: false,
        tagline: "Every clue is a lie.", badge: "COMING SOON"
      },

      // â”€â”€ MORE EXTENDED RUN â”€â”€
      {
        id: 48, title: "Hereditary Haunts", genre: "Horror", rating: 7.8, duration: 127,
        poster: "https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?w=300&q=80",
        description: "After the death of her secretive mother, a woman begins uncovering increasingly disturbing truths about her family's history â€” and realizes the dead may not be done with the living.",
        cast: ["Toni Collette", "Gabriel Byrne", "Alex Wolff", "Milly Shapiro"], year: 2024,
        showtimes: ["15:00", "18:30", "21:30", "23:30"], userRatings: [{ userId: 1, rating: 5 }], isFeatured: false,
        tagline: "You are your family's curse.", badge: "EXTENDED RUN"
      },

      {
        id: 49, title: "September 5", genre: "Drama", rating: 7.5, duration: 95,
        poster: "https://images.unsplash.com/photo-1507838153414-b4b713384a76?w=300&q=80",
        description: "The untold story of the 1972 Munich Olympics massacre, told entirely through the eyes of the ABC Sports broadcast team as they scrambled to cover one of the most shocking events in sporting history.",
        cast: ["Peter Sarsgaard", "John Magaro", "Ben Chaplin", "Leonie Benesch"], year: 2024,
        showtimes: ["12:30", "15:30", "18:30", "21:30"], userRatings: [{ userId: 2, rating: 4 }], isFeatured: false,
        tagline: "The world was watching.", badge: "EXTENDED RUN"
      },

      {
        id: 50, title: "Heretic", genre: "Thriller", rating: 7.3, duration: 110,
        poster: "https://images.unsplash.com/photo-1478720568477-152d9b164e26?w=300&q=80",
        description: "Two young Mormon missionaries knock on the wrong door and find themselves trapped by a cunning recluse who challenges their faith with dangerously persuasive philosophical arguments.",
        cast: ["Hugh Grant", "Sophie Thatcher", "Chloe East"], year: 2024,
        showtimes: ["14:00", "17:00", "20:00", "22:30"], userRatings: [{ userId: 1, rating: 4 }], isFeatured: false,
        tagline: "Believe nothing. Question everything.", badge: "EXTENDED RUN"
      },

      {
        id: 51, title: "We Live in Time", genre: "Romance", rating: 7.9, duration: 107,
        poster: "https://images.unsplash.com/photo-1518895949257-7621c3c786d7?w=300&q=80",
        description: "Told across three interwoven timelines, a love story unfolds between a couple navigating life's biggest milestones â€” from a chance encounter to raising a child â€” while one of them faces a life-threatening illness.",
        cast: ["Andrew Garfield", "Florence Pugh"], year: 2024,
        showtimes: ["12:00", "15:00", "18:00", "21:00"], userRatings: [{ userId: 2, rating: 5 }], isFeatured: false,
        tagline: "Love is measured in moments.", badge: "EXTENDED RUN"
      },

      {
        id: 52, title: "Nickel Boys", genre: "Drama", rating: 8.2, duration: 140,
        poster: "https://images.unsplash.com/photo-1589829545856-d10d557cf95f?w=300&q=80",
        description: "Based on Colson Whitehead's Pulitzer Prize-winning novel: two boys form a life-saving friendship at a brutal reform school in 1960s Florida, told through an immersive first-person visual style.",
        cast: ["Ethan Herisse", "Brandon Wilson", "Aunjanue Ellis-Taylor", "Hamish Linklater"], year: 2024,
        showtimes: ["11:00", "14:30", "18:00", "21:30"], userRatings: [{ userId: 1, rating: 5 }, { userId: 2, rating: 4 }], isFeatured: false,
        tagline: "Some scars never fade.", badge: "EXTENDED RUN"
      },

      {
        id: 53, title: "Hard Truths", genre: "Drama", rating: 7.6, duration: 97,
        poster: "https://images.unsplash.com/photo-1497366216548-37526070297c?w=300&q=80",
        description: "A volatile middle-aged woman living in a north London suburb battles through everyday life, lashing out at everyone around her, while her sister enjoys an easier, more contented existence.",
        cast: ["Marianne Jean-Baptiste", "Michele Austin", "David Webber"], year: 2024,
        showtimes: ["13:30", "16:30", "19:30"], userRatings: [{ userId: 2, rating: 4 }], isFeatured: false,
        tagline: "Some people carry their pain loudly.", badge: "EXTENDED RUN"
      },

      {
        id: 54, title: "Sing Sing", genre: "Drama", rating: 8.1, duration: 105,
        poster: "https://images.unsplash.com/photo-1502602898657-3e91760cbb34?w=300&q=80",
        description: "Based on a true story: a wrongly convicted man finds purpose and community at Sing Sing Prison through a volunteer theater program, and fights for his exoneration through the power of creativity.",
        cast: ["Colman Domingo", "Paul Raci", "Clarence Maclin"], year: 2024,
        showtimes: ["13:00", "16:00", "19:00"], userRatings: [{ userId: 1, rating: 5 }], isFeatured: false,
        tagline: "Art can set you free.", badge: "EXTENDED RUN"
      },

      {
        id: 55, title: "I'm Still Here", genre: "Drama", rating: 8.4, duration: 137,
        poster: "https://images.unsplash.com/photo-1474552226712-ac0f0961a954?w=300&q=80",
        description: "Brazil, 1971. Eunice Paiva's life is upended when military forces take her husband, a political activist. As years pass, she becomes an iconic advocate for those who disappeared under the dictatorship.",
        cast: ["Fernanda Torres", "Selton Mello", "Fernanda Montenegro"], year: 2024,
        showtimes: ["12:30", "15:30", "18:30", "21:30"], userRatings: [{ userId: 2, rating: 5 }], isFeatured: false,
        tagline: "They disappeared her husband. They couldn't disappear her.", badge: "EXTENDED RUN"
      },

      {
        id: 56, title: "The Substance", genre: "Horror", rating: 7.1, duration: 140,
        poster: "https://images.unsplash.com/photo-1534447677768-be436bb09401?w=300&q=80",
        description: "A fading celebrity uses a black-market drug that produces a younger, better version of herself â€” but maintaining two lives becomes an obsession that spirals into visceral, body-horror nightmare.",
        cast: ["Demi Moore", "Margaret Qualley", "Dennis Quaid"], year: 2024,
        showtimes: ["14:30", "17:30", "20:30", "23:00"], userRatings: [{ userId: 1, rating: 4 }], isFeatured: false,
        tagline: "Have you ever dreamed of a better version of yourself?", badge: "EXTENDED RUN"
      },

      {
        id: 57, title: "Kinds of Kindness", genre: "Drama", rating: 6.8, duration: 164,
        poster: "https://images.unsplash.com/photo-1519681393784-d120267933ba?w=300&q=80",
        description: "A triptych of darkly comic, unsettling fables: a man desperate to take control of his own life, a cop who finds his wife has returned mysteriously changed, and a woman searching for a chosen one.",
        cast: ["Jesse Plemons", "Emma Stone", "Willem Dafoe", "Margaret Qualley", "Hong Chau"], year: 2024,
        showtimes: ["12:00", "16:00", "20:00"], userRatings: [{ userId: 2, rating: 3 }], isFeatured: false,
        tagline: "Three stories. One filmmaker. Zero mercy.", badge: "EXTENDED RUN"
      },

      {
        id: 58, title: "His Three Daughters", genre: "Drama", rating: 7.8, duration: 107,
        poster: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&q=80",
        description: "Three estranged sisters â€” each wildly different â€” are forced together in their father's New York apartment as he lies dying. Old wounds reopen, loyalties are tested, and love resurfaces in unexpected ways.",
        cast: ["Carrie Coon", "Natasha Lyonne", "Elizabeth Olsen"], year: 2024,
        showtimes: ["13:30", "16:30", "19:30"], userRatings: [{ userId: 1, rating: 4 }, { userId: 2, rating: 4 }], isFeatured: false,
        tagline: "Family is complicated. Grief is impossible.", badge: "EXTENDED RUN"
      },

      {
        id: 59, title: "Flow", genre: "Animation", rating: 8.6, duration: 84,
        poster: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?w=300&q=80",
        description: "A solitary cat survives a catastrophic flood and must set aside its instincts to share a boat with capybaras, a lemur, a secretary bird, and a dog â€” forming an unlikely family in a world reclaimed by water.",
        cast: ["(Animated â€” no dialogue)"], year: 2024,
        showtimes: ["10:00", "12:00", "14:00", "16:00"], userRatings: [{ userId: 1, rating: 5 }, { userId: 2, rating: 5 }], isFeatured: false,
        tagline: "No words. No boundaries. Pure cinema.", badge: "EXTENDED RUN"
      },

      {
        id: 60, title: "Love Lies Bleeding", genre: "Thriller", rating: 7.3, duration: 104,
        poster: "https://images.unsplash.com/photo-1504701954957-2010ec3bcec1?w=300&q=80",
        description: "A reclusive gym manager falls hard for a drifter with dreams of becoming a bodybuilder. Their passionate relationship spirals into violence after a run-in with the manager's dangerous crime-lord father.",
        cast: ["Kristen Stewart", "Katy O'Brian", "Ed Harris", "Jena Malone", "Dave Franco"], year: 2024,
        showtimes: ["14:30", "17:30", "20:30", "23:00"], userRatings: [{ userId: 2, rating: 4 }], isFeatured: false,
        tagline: "Love is the most dangerous drug.", badge: "EXTENDED RUN"
      },
    ];

    const GENRES = ["All", "Action", "Sci-Fi", "Drama", "Thriller", "Horror", "Animation", "Adventure", "Romance", "Comedy"];
    const BADGES = { "NOW SHOWING": "#e8b84b", "COMING SOON": "#4f9eff", "EXTENDED RUN": "#4caf7d" };

    const generateSeats = () => {
      const rows = ["A", "B", "C", "D", "E"];
      return rows.flatMap(row =>
        Array.from({ length: 8 }, (_, i) => ({
          id: `${row}${i + 1}`, row, number: i + 1,
          type: row === "A" ? "prm" : row === "E" ? "bck" : "std"
        }))
      );
    };

    const seatPrice = t => t === "prm" ? 65 : t === "bck" ? 35 : 50;

    // â”€â”€ STORAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const DATA_VERSION = "v5.0";
    if (localStorage.getItem("mt_version") !== DATA_VERSION) {
      ["mt_movies", "mt_seats"].forEach(k => localStorage.removeItem(k));
      localStorage.setItem("mt_version", DATA_VERSION);
    }
    const gl = (k, f) => { try { const v = localStorage.getItem(k); return v ? JSON.parse(v) : f } catch { return f } };
    const sl = (k, v) => { try { localStorage.setItem(k, JSON.stringify(v)) } catch { } };

    const getDates = () => Array.from({ length: 7 }, (_, i) => {
      const d = new Date(); d.setDate(d.getDate() + i);
      return { date: d.toISOString().split("T")[0], label: d.toLocaleDateString("en", { weekday: "short" }), num: d.getDate() };
    });

    // â”€â”€ CONTEXT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const Ctx = createContext(null);
    const useApp = () => useContext(Ctx);

    function Provider({ children }) {
      const [user, setUser] = useState(() => gl("mt_user", null));
      const [movies, setMovies] = useState(() => gl("mt_movies", INIT_MOVIES));
      const [orders, setOrders] = useState(() => gl("mt_orders", []));
      const [seats, setSeats] = useState(() => gl("mt_seats", {}));
      const [favs, setFavs] = useState(() => gl("mt_favs", []));
      const [dark, setDark] = useState(() => gl("mt_dark", true));
      const [page, setPage] = useState("home");
      const [selMov, setSelMov] = useState(null);

      useEffect(() => sl("mt_user", user), [user]);
      useEffect(() => sl("mt_movies", movies), [movies]);
      useEffect(() => sl("mt_orders", orders), [orders]);
      useEffect(() => sl("mt_seats", seats), [seats]);
      useEffect(() => sl("mt_favs", favs), [favs]);
      useEffect(() => sl("mt_dark", dark), [dark]);

      useEffect(() => {
        const handlePopState = (e) => {
          if (e.state) {
            setPage(e.state.page || "home");
            setSelMov(e.state.selMov || null);
          }
        };
        window.addEventListener("popstate", handlePopState);
        if (!window.history.state) {
          window.history.replaceState({ page: "home", selMov: null }, "");
        } else if (window.history.state.page) {
          setPage(window.history.state.page);
          setSelMov(window.history.state.selMov);
        }
        return () => window.removeEventListener("popstate", handlePopState);
      }, []);

      const nav = (p, m = null) => {
        setPage(p);
        setSelMov(m);
        window.history.pushState({ page: p, selMov: m }, "");
        window.scrollTo(0, 0);
      };
      const login = u => setUser(u);
      const logout = () => setUser(null);
      const toggleFav = id => setFavs(p => p.includes(id) ? p.filter(x => x !== id) : [...p, id]);

      const addOrder = ord => {
        const o = { ...ord, id: Date.now(), status: "confirmed", created: new Date().toISOString() };
        setOrders(p => [o, ...p]);
        const k = `${ord.movieId}_${ord.date}_${ord.time}`;
        setSeats(p => ({ ...p, [k]: [...(p[k] || []), ...ord.seats] }));
        return o;
      };
      const getOcc = (mId, date, time) => seats[`${mId}_${date}_${time}`] || [];

      const addMovie = m => setMovies(p => [...p, { ...m, id: Date.now(), userRatings: [], isFeatured: false }]);
      const editMovie = (id, d) => setMovies(p => p.map(m => m.id === id ? { ...m, ...d } : m));
      const delMovie = id => setMovies(p => p.filter(m => m.id !== id));

      const rateMovie = (mId, r) => setMovies(p => p.map(m => {
        if (m.id !== mId) return m;
        const f = m.userRatings.filter(x => x.userId !== user?.id);
        const n = [...f, { userId: user?.id, rating: r }];
        return { ...m, userRatings: n, rating: parseFloat((n.reduce((s, x) => s + x.rating, 0) / n.length).toFixed(1)) };
      }));

      const userOrders = orders.filter(o => o.userId === user?.id);

      return (
        <Ctx.Provider value={{
          user, login, logout,
          movies, addMovie, editMovie, delMovie, rateMovie,
          orders, userOrders, addOrder, getOcc,
          favs, toggleFav,
          dark, setDark,
          page, nav, selMov,
        }}>{children}</Ctx.Provider>
      );
    }

    // â”€â”€ STAR RATING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Stars({ value, onRate, readonly }) {
      const [hov, setHov] = useState(0);
      return (
        <div className="stars" aria-label="Star rating">
          {[1, 2, 3, 4, 5].map(i => (
            <span key={i} className={`star${i <= (hov || value) ? " f" : ""}`}
              onClick={() => !readonly && onRate && onRate(i)}
              onMouseEnter={() => !readonly && setHov(i)}
              onMouseLeave={() => !readonly && setHov(0)}
              data-testid={`star-${i}`}>â˜…</span>
          ))}
        </div>
      );
    }

    // â”€â”€ NAVBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Navbar() {
      const { user, logout, nav, page, dark, setDark, userOrders } = useApp();
      return (
        <nav className="navbar" role="navigation" aria-label="Main navigation">
          <div className="navbar-inner">
            <div className="logo" onClick={() => nav("home")} data-testid="logo" aria-label="MovieTime logo">MOVIE<span>TIME</span></div>
            <div className="nav-links">
              <button className={`nbtn${page === "home" ? " act" : ""}`} onClick={() => nav("home")} data-testid="nav-home">Home</button>
              <button className={`nbtn${page === "movies" ? " act" : ""}`} onClick={() => nav("movies")} data-testid="nav-movies">All Movies</button>
              {user && <>
                <button className={`nbtn${page === "orders" ? " act" : ""}`} onClick={() => nav("orders")} data-testid="nav-orders">
                  My Orders{userOrders.length > 0 && <span className="badge">{userOrders.length}</span>}
                </button>
                {user.role === "admin" && <button className={`nbtn${page === "admin" ? " act" : ""}`} onClick={() => nav("admin")} data-testid="nav-admin">Admin</button>}
              </>}
            </div>
            <div className="nav-right">
              <button className="tbtn" onClick={() => setDark(d => !d)} aria-label="Toggle dark mode" data-testid="theme-toggle">{dark ? "â˜€ï¸" : "ðŸŒ™"}</button>
              {user
                ? <><span className="uname" data-testid="user-name">ðŸ‘¤ {user.name}</span>
                  <button className="nbtn dng" onClick={logout} data-testid="btn-logout" aria-label="Logout">Logout</button></>
                : <><button className="nbtn" onClick={() => nav("login")} data-testid="btn-login">Login</button>
                  <button className="nbtn acc" onClick={() => nav("register")} data-testid="btn-register">Register</button></>
              }
            </div>
          </div>
        </nav>
      );
    }

    // â”€â”€ MOVIE CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function MovieCard({ movie }) {
      const { nav, toggleFav, favs } = useApp();
      const isFav = favs.includes(movie.id);
      const badgeColor = BADGES[movie.badge] || "#9896a4";
      return (
        <div className="mcard" data-testid={`movie-card-${movie.id}`} aria-label={`Movie: ${movie.title}`}>
          <div className="mposter">
            <img src={movie.poster} alt={`${movie.title} poster`} loading="lazy" />
            {movie.badge && (
              <div style={{ position: "absolute", top: 10, left: 10, background: badgeColor, color: movie.badge === "NOW SHOWING" ? "#000" : "#fff", fontSize: 10, fontWeight: 700, padding: "3px 8px", borderRadius: 4, letterSpacing: .5, textTransform: "uppercase", zIndex: 2 }}>
                {movie.badge}
              </div>
            )}
            <div className="moverlay" />
            <div className="mactions">
              <button className={`favbtn${isFav ? " act" : ""}`}
                onClick={e => { e.stopPropagation(); toggleFav(movie.id) }}
                aria-label={isFav ? "Remove from favorites" : "Add to favorites"}
                data-testid={`fav-btn-${movie.id}`}>{isFav ? "â™¥" : "â™¡"}</button>
              <button className="detbtn" onClick={() => nav("movieDetails", movie)}
                aria-label={`Details for ${movie.title}`} data-testid={`details-btn-${movie.id}`}>Details</button>
            </div>
          </div>
          <div className="minfo">
            <div className="mtitle" title={movie.title}>{movie.title}</div>
            <div className="mmeta">
              {movie.rating > 0
                ? <span className="mrat">â˜… {movie.rating}</span>
                : <span style={{ color: "var(--text3)", fontSize: 12 }}>Unrated</span>
              }
              <span>Â·</span><span>{movie.duration}m</span>
              <span className="gtag">{movie.genre}</span>
            </div>
            {movie.tagline && <div style={{ fontSize: 11, color: "var(--text3)", marginTop: 4, fontStyle: "italic", overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{movie.tagline}</div>}
          </div>
        </div>
      );
    }

    // â”€â”€ HOME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function StatBar({ movies }) {
      const nowShowing = movies.filter(m => m.badge === "NOW SHOWING").length;
      const comingSoon = movies.filter(m => m.badge === "COMING SOON").length;
      const avgRating = (movies.filter(m => m.rating > 0).reduce((s, m) => s + m.rating, 0) / movies.filter(m => m.rating > 0).length).toFixed(1);
      const stats = [
        { icon: "ðŸŽ¬", label: "Now Showing", value: nowShowing },
        { icon: "ðŸ“…", label: "Coming Soon", value: comingSoon },
        { icon: "ðŸ¿", label: "Total Films", value: movies.length },
        { icon: "â­", label: "Avg Rating", value: avgRating },
        { icon: "ðŸ†", label: "Halls", value: 3 },
        { icon: "ðŸŽŸ", label: "Daily Shows", value: movies.reduce((s, m) => s + m.showtimes.length, 0) },
      ];
      return (
        <div style={{ background: "var(--bg2)", borderBottom: "1px solid var(--border)", padding: "12px 0" }}>
          <div className="container">
            <div style={{ display: "flex", gap: 0, overflowX: "auto", scrollbarWidth: "none" }}>
              {stats.map((s, i) => (
                <div key={i} style={{ flex: "0 0 auto", display: "flex", alignItems: "center", gap: 10, padding: "8px 24px", borderRight: "1px solid var(--border)" }}>
                  <span style={{ fontSize: 22 }}>{s.icon}</span>
                  <div>
                    <div style={{ fontSize: 20, fontWeight: 700, fontFamily: "'Bebas Neue',sans-serif", letterSpacing: 1, color: "var(--accent)", lineHeight: 1 }}>{s.value}</div>
                    <div style={{ fontSize: 11, color: "var(--text3)", textTransform: "uppercase", letterSpacing: .5 }}>{s.label}</div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      );
    }

    function FeaturedBanner({ movies, nav }) {
      const featured = movies.filter(m => m.isFeatured);
      const [idx, setIdx] = useState(0);
      useEffect(() => {
        const t = setInterval(() => setIdx(i => (i + 1) % featured.length), 5000);
        return () => clearInterval(t);
      }, [featured.length]);
      if (!featured.length) return null;
      const m = featured[idx];
      const badgeColor = BADGES[m.badge] || "#9896a4";
      return (
        <div style={{ position: "relative", height: "clamp(280px,45vw,480px)", overflow: "hidden", marginBottom: 0 }}>
          <div style={{ position: "absolute", inset: 0, backgroundImage: `url(${m.poster})`, backgroundSize: "cover", backgroundPosition: "center", filter: "blur(2px) brightness(.35)", transform: "scale(1.05)", transition: "all .8s ease" }} />
          <div style={{ position: "absolute", inset: 0, background: "linear-gradient(to right, rgba(0,0,0,.9) 0%, rgba(0,0,0,.4) 60%, transparent 100%)" }} />
          <div className="container" style={{ position: "relative", zIndex: 1, height: "100%", display: "flex", alignItems: "center" }}>
            <div style={{ maxWidth: 520 }}>
              {m.badge && <div style={{ display: "inline-block", background: badgeColor, color: m.badge === "NOW SHOWING" ? "#000" : "#fff", fontSize: 11, fontWeight: 700, padding: "4px 10px", borderRadius: 4, letterSpacing: 1, marginBottom: 12, textTransform: "uppercase" }}>{m.badge}</div>}
              <h2 style={{ fontFamily: "'Bebas Neue',sans-serif", fontSize: "clamp(32px,5vw,60px)", letterSpacing: 2, lineHeight: 1, marginBottom: 8, color: "#fff" }}>{m.title}</h2>
              {m.tagline && <p style={{ color: "var(--accent)", fontStyle: "italic", fontSize: 15, marginBottom: 10 }}>"{m.tagline}"</p>}
              <p style={{ color: "rgba(255,255,255,.7)", fontSize: 14, lineHeight: 1.6, marginBottom: 18, display: "-webkit-box", WebkitLineClamp: 3, WebkitBoxOrient: "vertical", overflow: "hidden" }}>{m.description}</p>
              <div style={{ display: "flex", gap: 10, alignItems: "center", marginBottom: 18, flexWrap: "wrap" }}>
                {m.rating > 0 && <span style={{ background: "var(--accent)", color: "#000", padding: "4px 12px", borderRadius: 999, fontWeight: 700, fontSize: 13 }}>â˜… {m.rating}</span>}
                <span style={{ background: "rgba(255,255,255,.1)", color: "#fff", padding: "4px 12px", borderRadius: 999, fontSize: 13 }}>{m.genre}</span>
                <span style={{ background: "rgba(255,255,255,.1)", color: "#fff", padding: "4px 12px", borderRadius: 999, fontSize: 13 }}>{m.duration} min</span>
                <span style={{ background: "rgba(255,255,255,.1)", color: "#fff", padding: "4px 12px", borderRadius: 999, fontSize: 13 }}>{m.year}</span>
              </div>
              <button className="btn" onClick={() => nav("movieDetails", m)} style={{ marginRight: 10 }}>View Details</button>
              <button className="btn sec" onClick={() => nav("booking", m)}>Book Now ðŸŽŸ</button>
            </div>
          </div>
          {/* dots */}
          <div style={{ position: "absolute", bottom: 16, left: "50%", transform: "translateX(-50%)", display: "flex", gap: 6 }}>
            {featured.map((_, i) => (
              <button key={i} onClick={() => setIdx(i)} style={{ width: i === idx ? 24 : 8, height: 8, borderRadius: 999, border: "none", background: i === idx ? "var(--accent)" : "rgba(255,255,255,.3)", cursor: "pointer", transition: "all .3s", padding: 0 }} />
            ))}
          </div>
        </div>
      );
    }

    function Home() {
      const { movies, nav } = useApp();
      const [q, setQ] = useState("");
      const [genre, setGenre] = useState("All");
      const [tab, setTab] = useState("now"); // now | soon | extended | top

      const tabMovies = {
        now: movies.filter(m => m.badge === "NOW SHOWING"),
        soon: movies.filter(m => m.badge === "COMING SOON"),
        extended: movies.filter(m => m.badge === "EXTENDED RUN"),
        top: [...movies].filter(m => m.rating > 0).sort((a, b) => b.rating - a.rating).slice(0, 8),
      };

      const isSearching = q || genre !== "All";
      const filtered = movies.filter(m => (genre === "All" || m.genre === genre) && m.title.toLowerCase().includes(q.toLowerCase()));

      return (
        <div>
          {/* HERO */}
          <div className="hero" style={{ paddingBottom: 40 }}>
            <div className="container">
              <div className="hero-c">
                <h1 className="hero-t">MOVIE<span>TIME</span></h1>
                <p className="hero-s">Tel Aviv's premier cinematic experience</p>
                <div className="srch" role="search">
                  <input type="text" placeholder="Search by title, genre, or cast..." value={q} onChange={e => setQ(e.target.value)}
                    aria-label="Search movies" data-testid="search-input" name="search" />
                  <button aria-label="Search" data-testid="search-btn">ðŸ” Search</button>
                </div>
                <div className="pills" role="group" aria-label="Genre filter">
                  {GENRES.map(g => (
                    <button key={g} className={`pill${genre === g ? " act" : ""}`} onClick={() => setGenre(g)}
                      data-testid={`genre-${g.toLowerCase()}`} aria-label={`Filter by ${g}`} aria-pressed={genre === g}>{g}</button>
                  ))}
                </div>
              </div>
            </div>
          </div>

          {/* STATS BAR */}
          <StatBar movies={movies} />

          {/* CONTENT */}
          {isSearching ? (
            <div className="page"><div className="container">
              <h2 className="stitle">Search <span>Results</span> ({filtered.length})</h2>
              {filtered.length === 0
                ? <div className="emp"><div className="emp-ic">ðŸŽ¬</div><h3>No movies found</h3><p>Try a different search or genre</p></div>
                : <div className="mgrid">{filtered.map(m => <MovieCard key={m.id} movie={m} />)}</div>
              }
            </div></div>
          ) : (
            <div>
              {/* FEATURED BANNER */}
              <FeaturedBanner movies={movies} nav={nav} />

              <div className="page"><div className="container">
                {/* TABS */}
                <div style={{ display: "flex", gap: 4, borderBottom: "1px solid var(--border)", marginBottom: 28, overflowX: "auto", scrollbarWidth: "none" }}>
                  {[
                    { k: "now", label: "ðŸŽ¬ Now Showing", count: tabMovies.now.length },
                    { k: "soon", label: "ðŸ“… Coming Soon", count: tabMovies.soon.length },
                    { k: "extended", label: "ðŸ” Extended Run", count: tabMovies.extended.length },
                    { k: "top", label: "â­ Top Rated", count: tabMovies.top.length },
                  ].map(t => (
                    <button key={t.k}
                      className={`atab${tab === t.k ? " act" : ""}`}
                      onClick={() => setTab(t.k)}
                      data-testid={`tab-${t.k}`}
                      style={{ whiteSpace: "nowrap" }}
                    >{t.label} <span style={{ opacity: .6, fontSize: 12 }}>({t.count})</span></button>
                  ))}
                </div>

                {/* TAB CONTENT */}
                {tab === "now" && (
                  <div>
                    <p className="tm mb24" style={{ fontSize: 14 }}>ðŸŽŸ These films are currently screening â€” book your seats now!</p>
                    <div className="mgrid">{tabMovies.now.map(m => <MovieCard key={m.id} movie={m} />)}</div>
                  </div>
                )}
                {tab === "soon" && (
                  <div>
                    <p className="tm mb24" style={{ fontSize: 14 }}>ðŸ“… Opening soon â€” mark your calendar and be the first in line.</p>
                    <div className="mgrid">{tabMovies.soon.map(m => <MovieCard key={m.id} movie={m} />)}</div>
                  </div>
                )}
                {tab === "extended" && (
                  <div>
                    <p className="tm mb24" style={{ fontSize: 14 }}>ðŸ” Still running due to popular demand â€” don't miss your last chance!</p>
                    <div className="mgrid">{tabMovies.extended.map(m => <MovieCard key={m.id} movie={m} />)}</div>
                  </div>
                )}
                {tab === "top" && (
                  <div>
                    <p className="tm mb24" style={{ fontSize: 14 }}>â­ Our highest-rated films of the season, as voted by audiences.</p>
                    <div className="mgrid">{tabMovies.top.map(m => <MovieCard key={m.id} movie={m} />)}</div>
                  </div>
                )}
              </div></div>
            </div>
          )}
        </div>
      );
    }

    // â”€â”€ ALL MOVIES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Movies() {
      const { movies } = useApp();
      const [genre, setGenre] = useState("All");
      const [sort, setSort] = useState("rating");
      const list = movies
        .filter(m => genre === "All" || m.genre === genre)
        .sort((a, b) => sort === "rating" ? b.rating - a.rating : sort === "title" ? a.title.localeCompare(b.title) : b.year - a.year);
      return (
        <div className="page">
          <div className="container">
            <div className="fbet mb24" style={{ flexWrap: "wrap", gap: 14 }}>
              <h1 className="stitle" style={{ marginBottom: 0 }}>All <span>Movies</span></h1>
              <select className="finp" style={{ width: "auto", padding: "8px 13px" }} value={sort} onChange={e => setSort(e.target.value)} aria-label="Sort movies" data-testid="sort-select">
                <option value="rating">Sort: Rating</option>
                <option value="title">Sort: Title</option>
                <option value="year">Sort: Year</option>
              </select>
            </div>
            <div className="pills mb24" style={{ justifyContent: "flex-start" }}>
              {GENRES.map(g => <button key={g} className={`pill${genre === g ? " act" : ""}`} onClick={() => setGenre(g)} data-testid={`filter-genre-${g.toLowerCase()}`}>{g}</button>)}
            </div>
            <div className="mgrid">{list.map(m => <MovieCard key={m.id} movie={m} />)}</div>
          </div>
        </div>
      );
    }

    // â”€â”€ MOVIE DETAILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function MovieDetails() {
      const { selMov, user, nav, rateMovie, movies, toggleFav, favs } = useApp();
      const movie = movies.find(m => m.id === selMov?.id) || selMov;
      const [myRat, setMyRat] = useState(() => {
        if (!user || !movie) return 0;
        return movie.userRatings?.find(r => r.userId === user.id)?.rating || 0;
      });
      if (!movie) return <div className="page"><div className="container"><div className="alert err">Movie not found</div></div></div>;
      const isFav = favs.includes(movie.id);
      const handleRate = r => { if (!user) { nav("login"); return } setMyRat(r); rateMovie(movie.id, r) };
      return (
        <div>
          <div className="mdhero">
            <div className="mdbg" style={{ backgroundImage: `url(${movie.poster})` }} />
            <div className="mdcnt">
              <div><div className="mdposter"><img src={movie.poster} alt={`${movie.title} poster`} /></div></div>
              <div className="mdinfo">
                <h1 className="mdtitle" data-testid="movie-title">{movie.title}</h1>
                <div className="mdmeta">
                  <span className="mtagr" data-testid="movie-rating">â˜… {movie.rating}</span>
                  <span className="mtag">{movie.genre}</span>
                  <span className="mtag">{movie.duration} min</span>
                  <span className="mtag">{movie.year}</span>
                </div>
                <p className="mddesc" data-testid="movie-desc">{movie.description}</p>
                <div className="castlist" aria-label="Cast">
                  {movie.cast.map(a => <span key={a} className="casttag">{a}</span>)}
                </div>
                <div className="sttimes" aria-label="Showtimes" data-testid="showtimes">
                  {movie.showtimes.map(t => (
                    <button key={t} className="stbtn" onClick={() => user ? nav("booking", movie) : nav("login")}
                      aria-label={`Showtime ${t}`} data-testid={`showtime-${t.replace(":", "-")}`}>ðŸ• {t}</button>
                  ))}
                </div>
                <div className="fb g8" style={{ flexWrap: "wrap", alignItems: "center" }}>
                  {user
                    ? <button className="btn" onClick={() => nav("booking", movie)} data-testid="btn-book-ticket" aria-label="Book ticket">ðŸŽŸ Book Ticket</button>
                    : <button className="btn" onClick={() => nav("login")} data-testid="btn-login-to-book">Login to Book</button>
                  }
                  <button className="btn sec" onClick={() => toggleFav(movie.id)} data-testid="btn-favorite" aria-label={isFav ? "Remove favorite" : "Add favorite"}>
                    {isFav ? "â™¥ Favorited" : "â™¡ Favorite"}
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div className="page"><div className="container">
            <div className="card" style={{ maxWidth: 380 }}>
              <h3 style={{ marginBottom: 10 }}>Rate this movie</h3>
              <Stars value={myRat} onRate={handleRate} />
              {!user && <p className="tm" style={{ fontSize: 13, marginTop: 7 }}>Login to rate</p>}
              {user && myRat > 0 && <p style={{ color: "var(--success)", fontSize: 13, marginTop: 7 }}>Your rating: {myRat}/5 â˜…</p>}
            </div>
          </div></div>
        </div>
      );
    }

    // â”€â”€ BOOKING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Booking() {
      const { selMov, user, nav, getOcc, addOrder, movies } = useApp();
      const movie = movies.find(m => m.id === selMov?.id) || selMov;
      const dates = getDates();
      const [date, setDate] = useState(dates[0].date);
      const [time, setTime] = useState(movie?.showtimes[0] || "");
      const [cnt, setCnt] = useState(1);
      const [selSeats, setSel] = useState([]);
      const [step, setStep] = useState("seats");
      const [pay, setPay] = useState({ cardName: "", cardNumber: "", expiry: "", cvv: "" });
      const [payErr, setPayErr] = useState({});
      const [result, setResult] = useState(null);

      if (!movie || !user) return <div className="page"><div className="container"><div className="alert err">Please login and select a movie first.</div><button className="btn mt16" onClick={() => nav("login")}>Login</button></div></div>;

      const allSeats = generateSeats();
      const occ = getOcc(movie.id, date, time);

      const toggleSeat = seat => {
        if (occ.includes(seat.id)) return;
        setSel(prev => {
          if (prev.find(s => s.id === seat.id)) return prev.filter(s => s.id !== seat.id);
          if (prev.length >= cnt) return [...prev.slice(1), seat];
          return [...prev, seat];
        });
      };

      const total = selSeats.reduce((s, x) => s + seatPrice(x.type), 0);

      const valPay = () => {
        const e = {};
        if (!pay.cardName.trim()) e.cardName = "Card holder name required";
        if (!/^\d{16}$/.test(pay.cardNumber.replace(/\s/g, ""))) e.cardNumber = "Card number must be 16 digits";
        if (!/^\d{2}\/\d{2}$/.test(pay.expiry)) e.expiry = "Expiry must be MM/YY";
        if (!/^\d{3,4}$/.test(pay.cvv)) e.cvv = "CVV must be 3-4 digits";
        setPayErr(e); return Object.keys(e).length === 0;
      };

      const confirm = () => {
        if (!valPay()) return;
        const o = addOrder({
          movieId: movie.id, movieTitle: movie.title, moviePoster: movie.poster,
          userId: user.id, userName: user.name, date, time, seats: selSeats.map(s => s.id), ticketCount: selSeats.length, totalPrice: total
        });
        setResult(o); setStep("success");
      };

      const rows = ["A", "B", "C", "D", "E"];

      if (step === "success") return (
        <div className="page"><div className="container"><div className="bkcnt"><div className="card">
          <div className="suc-ov">
            <div className="suc-ic">ðŸŽ‰</div>
            <h2 style={{ fontSize: 28, marginBottom: 7, fontFamily: "'Bebas Neue',sans-serif", letterSpacing: 2 }}>BOOKING CONFIRMED!</h2>
            <p className="tm" style={{ marginBottom: 22 }}>Booking #{result?.id}</p>
            <div className="card" style={{ textAlign: "left", marginBottom: 22 }}>
              <div className="bkrow"><span>Movie</span><strong>{movie.title}</strong></div>
              <div className="bkrow"><span>Date</span><strong>{date}</strong></div>
              <div className="bkrow"><span>Time</span><strong>{time}</strong></div>
              <div className="bkrow"><span>Seats</span><strong>{selSeats.map(s => s.id).join(", ")}</strong></div>
              <div className="bktotal"><span>Total Paid</span><span className="ta">â‚ª{total}</span></div>
            </div>
            <div className="fb g8" style={{ justifyContent: "center", flexWrap: "wrap" }}>
              <button className="btn" onClick={() => nav("orders")} data-testid="btn-my-orders">My Orders</button>
              <button className="btn sec" onClick={() => nav("home")} data-testid="btn-home">Back to Home</button>
            </div>
          </div>
        </div></div></div></div>
      );

      return (
        <div className="page"><div className="container"><div className="bkcnt">
          <h1 className="stitle">Book <span>Tickets</span></h1>
          <p className="tm mb24">{movie.title}</p>

          {/* DATE */}
          <div className="card mb16">
            <h3 style={{ marginBottom: 13 }}>Select Date</h3>
            <div className="datebtnrow">
              {dates.map(d => (
                <button key={d.date} className={`datebtn${date === d.date ? " act" : ""}`}
                  onClick={() => { setDate(d.date); setSel([]) }}
                  aria-label={`Date ${d.date}`} data-testid={`date-btn-${d.date}`}>
                  <span className="dday">{d.label}</span>
                  <span className="dnum">{d.num}</span>
                </button>
              ))}
            </div>
            <h3 style={{ marginBottom: 13, marginTop: 18 }}>Select Time</h3>
            <div className="sttimes">
              {movie.showtimes.map(t => (
                <button key={t} className={`stbtn${time === t ? " act" : ""}`}
                  onClick={() => { setTime(t); setSel([]) }}
                  aria-label={`Time ${t}`} data-testid={`time-btn-${t.replace(":", "-")}`}>ðŸ• {t}</button>
              ))}
            </div>
          </div>

          {/* TICKET COUNT */}
          <div className="card mb16">
            <div className="tkcnt">
              <h3>Number of Tickets</h3>
              <div className="tkcntbtns">
                <button className="cnbtn" onClick={() => { setCnt(c => Math.max(1, c - 1)); setSel([]) }} aria-label="Decrease tickets" data-testid="btn-decrease-tickets">âˆ’</button>
                <span className="cnnum" data-testid="ticket-count">{cnt}</span>
                <button className="cnbtn" onClick={() => { setCnt(c => Math.min(8, c + 1)); setSel([]) }} aria-label="Increase tickets" data-testid="btn-increase-tickets">+</button>
              </div>
            </div>
            <p className="tm" style={{ fontSize: 13, marginTop: 7 }}>Select exactly {cnt} seat{cnt > 1 ? "s" : ""} below</p>
          </div>

          {/* SEATS */}
          <div className="card mb16">
            <h3 style={{ marginBottom: 18, textAlign: "center" }}>Select Seats</h3>
            <div className="screen" /><div className="screenlbl">SCREEN</div>
            <div className="seatsgrid" role="group" aria-label="Seat selection">
              {rows.map(row => (
                <div key={row} className="seatrow">
                  <span className="rowlbl">{row}</span>
                  {allSeats.filter(s => s.row === row).map(seat => {
                    const isOcc = occ.includes(seat.id);
                    const isSel = !!selSeats.find(s => s.id === seat.id);
                    return (
                      <button key={seat.id}
                        className={`seat ${isOcc ? "occ" : isSel ? "sel" : "av"} ${seat.type}`}
                        onClick={() => toggleSeat(seat)} disabled={isOcc}
                        aria-label={`Seat ${seat.id} ${isOcc ? "occupied" : isSel ? "selected" : "available"}`}
                        aria-pressed={isSel}
                        data-testid={`seat-${seat.id}`}
                        title={`${seat.id} - â‚ª${seatPrice(seat.type)}`}
                      >{seat.number}</button>
                    );
                  })}
                </div>
              ))}
            </div>
            <div className="slegend">
              <div className="litem"><div className="ldot" style={{ background: "var(--accent3)" }} />Standard â‚ª50</div>
              <div className="litem"><div className="ldot" style={{ background: "var(--accent)" }} />Premium â‚ª65</div>
              <div className="litem"><div className="ldot" style={{ background: "var(--text3)" }} />Back â‚ª35</div>
              <div className="litem"><div className="ldot" style={{ background: "var(--text3)", opacity: .4 }} />Occupied</div>
            </div>
          </div>

          {/* PAYMENT */}
          {selSeats.length === cnt && (
            <>
              <div className="bksumm">
                <div className="bkrow"><span>Movie</span><span>{movie.title}</span></div>
                <div className="bkrow"><span>Date & Time</span><span>{date} at {time}</span></div>
                <div className="bkrow"><span>Seats</span><span>{selSeats.map(s => s.id).join(", ")}</span></div>
                <div className="bktotal"><span>Total</span><span>â‚ª{total}</span></div>
              </div>
              <div className="card mb16">
                <h3 style={{ marginBottom: 18 }}>ðŸ’³ Payment Details</h3>
                <div className="pgrid">
                  <div className="fg pfull">
                    <label className="flbl" htmlFor="cname">Card Holder Name</label>
                    <input id="cname" name="cardName" className={`finp${payErr.cardName ? " err" : ""}`} placeholder="John Doe"
                      value={pay.cardName} onChange={e => setPay(p => ({ ...p, cardName: e.target.value }))}
                      aria-label="Card holder name" data-testid="input-card-name" />
                    {payErr.cardName && <div className="ferr">âš  {payErr.cardName}</div>}
                  </div>
                  <div className="fg pfull">
                    <label className="flbl" htmlFor="cnum">Card Number</label>
                    <input id="cnum" name="cardNumber" className={`finp${payErr.cardNumber ? " err" : ""}`} placeholder="1234 5678 9012 3456"
                      value={pay.cardNumber} onChange={e => setPay(p => ({ ...p, cardNumber: e.target.value }))} maxLength={19}
                      aria-label="Card number" data-testid="input-card-number" />
                    {payErr.cardNumber && <div className="ferr">âš  {payErr.cardNumber}</div>}
                  </div>
                  <div className="fg">
                    <label className="flbl" htmlFor="exp">Expiry (MM/YY)</label>
                    <input id="exp" name="expiry" className={`finp${payErr.expiry ? " err" : ""}`} placeholder="12/26"
                      value={pay.expiry} onChange={e => setPay(p => ({ ...p, expiry: e.target.value }))} maxLength={5}
                      aria-label="Expiry date" data-testid="input-expiry" />
                    {payErr.expiry && <div className="ferr">âš  {payErr.expiry}</div>}
                  </div>
                  <div className="fg">
                    <label className="flbl" htmlFor="cvv">CVV</label>
                    <input id="cvv" name="cvv" type="password" className={`finp${payErr.cvv ? " err" : ""}`} placeholder="â€¢â€¢â€¢"
                      value={pay.cvv} onChange={e => setPay(p => ({ ...p, cvv: e.target.value }))} maxLength={4}
                      aria-label="CVV" data-testid="input-cvv" />
                    {payErr.cvv && <div className="ferr">âš  {payErr.cvv}</div>}
                  </div>
                </div>
                <button className="btn ful" onClick={confirm} data-testid="btn-confirm-payment" aria-label="Confirm payment">
                  ðŸ’³ Confirm & Pay â‚ª{total}
                </button>
              </div>
            </>
          )}
        </div></div></div>
      );
    }

    // â”€â”€ LOGIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Login() {
      const { login, nav } = useApp();
      const [email, setEmail] = useState("");
      const [pwd, setPwd] = useState("");
      const [errs, setErrs] = useState({});
      const [gErr, setGErr] = useState("");

      const val = () => {
        const e = {};
        if (!email.trim()) e.email = "Email is required";
        else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) e.email = "Invalid email format";
        if (!pwd) e.pwd = "Password is required";
        else if (pwd.length < 6) e.pwd = "Password must be at least 6 characters";
        setErrs(e); return Object.keys(e).length === 0;
      };

      const submit = () => {
        setGErr("");
        if (!val()) return;
        const u = TEST_USERS.find(x => x.email === email);
        if (!u) { setGErr("User not found"); return }
        if (u.locked) { setGErr("Account is locked. Please contact support."); return }
        if (u.password !== pwd) { setGErr("Incorrect password"); return }
        login({ id: u.id, email: u.email, name: u.name, role: u.role });
        nav("home");
      };

      return (
        <div className="authpg">
          <div className="authcard" data-testid="login-form" role="form" aria-label="Login form">
            <h1 className="authtitle">Login</h1>
            <p className="authsub">Sign in to book tickets and manage your orders</p>

            <div className="tubox" data-testid="test-users-info">
              <div className="tutitle">Test Users (for demo purposes)</div>
              {TEST_USERS.map(u => (
                <div key={u.id} className="turow" data-testid={`test-user-${u.id}`}>
                  <span style={{ fontFamily: "monospace", fontSize: 12 }}>{u.email} / {u.password}</span>
                  <span className={`turole ${u.locked ? "locked" : u.role}`}>{u.locked ? "locked" : u.role}</span>
                </div>
              ))}
            </div>

            {gErr && <div className="alert err" data-testid="login-error">{gErr}</div>}

            <div className="fg">
              <label className="flbl" htmlFor="lemail">Email Address</label>
              <input id="lemail" name="email" type="email" className={`finp${errs.email ? " err" : ""}`}
                placeholder="user@example.com" value={email}
                onChange={e => { setEmail(e.target.value); setErrs(p => ({ ...p, email: "" })) }}
                aria-label="Email address" data-testid="input-email" autoComplete="email"
                onKeyDown={e => e.key === "Enter" && submit()} />
              {errs.email && <div className="ferr" data-testid="error-email">âš  {errs.email}</div>}
            </div>
            <div className="fg">
              <label className="flbl" htmlFor="lpwd">Password</label>
              <input id="lpwd" name="password" type="password" className={`finp${errs.pwd ? " err" : ""}`}
                placeholder="Enter password" value={pwd}
                onChange={e => { setPwd(e.target.value); setErrs(p => ({ ...p, pwd: "" })) }}
                aria-label="Password" data-testid="input-password" autoComplete="current-password"
                onKeyDown={e => e.key === "Enter" && submit()} />
              {errs.pwd && <div className="ferr" data-testid="error-password">âš  {errs.pwd}</div>}
            </div>

            <button className="btn ful" onClick={submit} data-testid="btn-submit-login" aria-label="Submit login">Login</button>
            <div className="divider" />
            <p style={{ textAlign: "center", fontSize: 14, color: "var(--text2)" }}>
              Don't have an account?{" "}
              <span style={{ color: "var(--accent)", cursor: "pointer" }} onClick={() => nav("register")} data-testid="link-register">Register here</span>
            </p>
          </div>
        </div>
      );
    }

    // â”€â”€ REGISTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Register() {
      const { login, nav } = useApp();
      const [f, setF] = useState({ name: "", email: "", pwd: "", conf: "" });
      const [errs, setErrs] = useState({});
      const [ok, setOk] = useState(false);

      const val = () => {
        const e = {};
        if (!f.name.trim()) e.name = "Full name is required";
        if (!f.email.trim()) e.email = "Email is required";
        else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)) e.email = "Invalid email format";
        else if (TEST_USERS.find(u => u.email === f.email)) e.email = "Email already registered";
        if (!f.pwd) e.pwd = "Password is required";
        else if (f.pwd.length < 6) e.pwd = "Password must be at least 6 characters";
        if (!f.conf) e.conf = "Please confirm your password";
        else if (f.conf !== f.pwd) e.conf = "Passwords do not match";
        setErrs(e); return Object.keys(e).length === 0;
      };

      const submit = () => {
        if (!val()) return;
        login({ id: Date.now(), email: f.email, name: f.name, role: "user" });
        setOk(true);
        setTimeout(() => nav("home"), 1400);
      };

      const Field = ({ id, label, type = "text", ph, fk }) => (
        <div className="fg">
          <label className="flbl" htmlFor={id}>{label}</label>
          <input id={id} name={id} type={type} className={`finp${errs[fk] ? " err" : ""}`} placeholder={ph}
            value={f[fk]} onChange={e => { setF(p => ({ ...p, [fk]: e.target.value })); setErrs(p => ({ ...p, [fk]: "" })) }}
            aria-label={label} data-testid={`input-${id}`} />
          {errs[fk] && <div className="ferr" data-testid={`error-${id}`}>âš  {errs[fk]}</div>}
        </div>
      );

      return (
        <div className="authpg">
          <div className="authcard" data-testid="register-form" role="form" aria-label="Registration form">
            <h1 className="authtitle">Register</h1>
            <p className="authsub">Create your MovieTime account</p>
            {ok && <div className="alert suc" data-testid="register-success">Registration successful! Redirecting...</div>}
            <Field id="name" label="Full Name" ph="John Doe" fk="name" />
            <Field id="email" label="Email Address" type="email" ph="user@example.com" fk="email" />
            <Field id="password" label="Password" type="password" ph="Min. 6 characters" fk="pwd" />
            <Field id="confirm" label="Confirm Password" type="password" ph="Repeat password" fk="conf" />
            <button className="btn ful" onClick={submit} data-testid="btn-submit-register" aria-label="Submit registration">Create Account</button>
            <div className="divider" />
            <p style={{ textAlign: "center", fontSize: 14, color: "var(--text2)" }}>
              Already have an account?{" "}
              <span style={{ color: "var(--accent)", cursor: "pointer" }} onClick={() => nav("login")} data-testid="link-login">Login here</span>
            </p>
          </div>
        </div>
      );
    }

    // â”€â”€ ORDERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Orders() {
      const { user, userOrders, nav } = useApp();
      if (!user) return (
        <div className="page"><div className="container">
          <div className="alert wrn">Please login to view your orders</div>
          <button className="btn mt16" onClick={() => nav("login")}>Login</button>
        </div></div>
      );
      return (
        <div className="page"><div className="container">
          <h1 className="stitle mb24">My <span>Orders</span></h1>
          {userOrders.length === 0
            ? <div className="emp"><div className="emp-ic">ðŸŽŸ</div><h3>No orders yet</h3><p>Book your first ticket!</p>
              <button className="btn mt16" onClick={() => nav("movies")}>Browse Movies</button></div>
            : <div className="ordgrid" data-testid="orders-list">
              {userOrders.map(o => (
                <div key={o.id} className="ordcard" data-testid={`order-${o.id}`} role="article" aria-label={`Order for ${o.movieTitle}`}>
                  <img src={o.moviePoster} alt={o.movieTitle} className="ordpost" />
                  <div>
                    <div style={{ fontWeight: 700, fontSize: 16, marginBottom: 5 }}>{o.movieTitle}</div>
                    <div className="tm" style={{ fontSize: 13 }}>ðŸ“… {o.date} at {o.time}</div>
                    <div className="tm" style={{ fontSize: 13 }}>ðŸ’º Seats: {o.seats.join(", ")}</div>
                    <div style={{ fontSize: 13, marginTop: 3 }}>ðŸŽŸ {o.ticketCount} ticket{o.ticketCount > 1 ? "s" : ""}</div>
                  </div>
                  <div style={{ textAlign: "right" }}>
                    <div style={{ fontWeight: 700, fontSize: 17, color: "var(--accent)", marginBottom: 7 }}>â‚ª{o.totalPrice}</div>
                    <span className="ordst conf" data-testid={`order-status-${o.id}`}>âœ“ Confirmed</span>
                  </div>
                </div>
              ))}
            </div>
          }
        </div></div>
      );
    }

    // â”€â”€ ADMIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Admin() {
      const { user, movies, addMovie, editMovie, delMovie, nav } = useApp();
      const [tab, setTab] = useState("movies");
      const [showAdd, setShowAdd] = useState(false);
      const [editing, setEditing] = useState(null);
      const emptyForm = { title: "", genre: "Action", rating: "", duration: "", description: "", poster: "", cast: "", year: 2024, showtimes: "10:00,14:00,18:00" };
      const [form, setForm] = useState(emptyForm);
      const [ferr, setFerr] = useState({});

      if (!user || user.role !== "admin") return (
        <div className="page"><div className="container">
          <div className="acc-den" data-testid="access-denied">
            <div className="acc-ic">ðŸš«</div>
            <h2 style={{ fontFamily: "'Bebas Neue',sans-serif", fontSize: 38, letterSpacing: 2 }}>ACCESS DENIED</h2>
            <p className="tm" style={{ marginBottom: 22 }}>You don't have permission to access the Admin Panel.</p>
            <button className="btn" onClick={() => nav("home")}>Back to Home</button>
          </div>
        </div></div>
      );

      const valForm = () => {
        const e = {};
        if (!form.title.trim()) e.title = "Title required";
        if (!form.rating || isNaN(form.rating) || +form.rating < 0 || +form.rating > 10) e.rating = "Rating 0â€“10";
        if (!form.duration || isNaN(form.duration)) e.duration = "Duration required";
        if (!form.description.trim()) e.description = "Description required";
        setFerr(e); return Object.keys(e).length === 0;
      };

      const save = () => {
        if (!valForm()) return;
        const data = {
          ...form, rating: parseFloat(form.rating), duration: parseInt(form.duration),
          cast: form.cast.split(",").map(s => s.trim()).filter(Boolean),
          showtimes: form.showtimes.split(",").map(s => s.trim()).filter(Boolean),
          poster: form.poster || "https://images.unsplash.com/photo-1440404653325-ab127d49abc1?w=300&q=80"
        };
        if (editing) { editMovie(editing.id, data); setEditing(null); }
        else { addMovie(data); setShowAdd(false); }
        setForm(emptyForm);
      };

      const startEdit = m => { setEditing(m); setForm({ ...m, cast: m.cast.join(", "), showtimes: m.showtimes.join(", ") }) };
      const closeModal = () => { setShowAdd(false); setEditing(null); setForm(emptyForm); setFerr({}) };

      const FormField = ({ id, label, fk, ph, type = "text" }) => (
        <div className="fg">
          <label className="flbl" htmlFor={id}>{label}</label>
          <input id={id} type={type} className={`finp${ferr[fk] ? " err" : ""}`} placeholder={ph}
            value={form[fk]} onChange={e => setForm(p => ({ ...p, [fk]: e.target.value }))}
            aria-label={label} data-testid={`admin-input-${fk}`} />
          {ferr[fk] && <div className="ferr">{ferr[fk]}</div>}
        </div>
      );

      return (
        <div className="page"><div className="container">
          <div className="fbet mb24">
            <h1 className="stitle" style={{ marginBottom: 0 }}>Admin <span>Panel</span></h1>
            <span style={{ color: "var(--success)", fontSize: 14 }}>ðŸ‘¤ {user.name} (Admin)</span>
          </div>
          <div className="atabs" role="tablist">
            {["movies", "showtimes", "users"].map(t => (
              <button key={t} className={`atab${tab === t ? " act" : ""}`} onClick={() => setTab(t)}
                role="tab" aria-selected={tab === t} data-testid={`admin-tab-${t}`}>{t.charAt(0).toUpperCase() + t.slice(1)}</button>
            ))}
          </div>

          {tab === "movies" && <>
            <div className="fbet mb16">
              <span className="tm">{movies.length} movies total</span>
              <button className="btn sm" onClick={() => setShowAdd(true)} data-testid="btn-add-movie" aria-label="Add new movie">+ Add Movie</button>
            </div>
            <div style={{ overflowX: "auto" }}>
              <table className="atable" data-testid="movies-table" aria-label="Movies management">
                <thead><tr><th>ID</th><th>Title</th><th>Genre</th><th>Rating</th><th>Duration</th><th>Actions</th></tr></thead>
                <tbody>
                  {movies.map(m => (
                    <tr key={m.id} data-testid={`movie-row-${m.id}`}>
                      <td>{m.id}</td>
                      <td style={{ fontWeight: 600 }}>{m.title}</td>
                      <td><span className="gtag">{m.genre}</span></td>
                      <td>â­ {m.rating}</td>
                      <td>{m.duration}m</td>
                      <td><div className="fb g8">
                        <button className="btn sm sec" onClick={() => startEdit(m)} data-testid={`btn-edit-${m.id}`} aria-label={`Edit ${m.title}`}>Edit</button>
                        <button className="btn sm dng" onClick={() => delMovie(m.id)} data-testid={`btn-delete-${m.id}`} aria-label={`Delete ${m.title}`}>Delete</button>
                      </div></td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </>}

          {tab === "showtimes" && <>
            <div className="alert inf mb16">Manage showtimes via the Movies tab â†’ Edit</div>
            <table className="atable" data-testid="showtimes-table">
              <thead><tr><th>Movie</th><th>Showtimes</th><th>Hall</th></tr></thead>
              <tbody>{movies.map(m => <tr key={m.id}><td style={{ fontWeight: 600 }}>{m.title}</td><td>{m.showtimes.join(" Â· ")}</td><td>Hall 1</td></tr>)}</tbody>
            </table>
          </>}

          {tab === "users" && <table className="atable" data-testid="users-table" aria-label="Users management">
            <thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Role</th><th>Status</th></tr></thead>
            <tbody>{TEST_USERS.map(u => (
              <tr key={u.id} data-testid={`user-row-${u.id}`}>
                <td>{u.id}</td>
                <td style={{ fontWeight: 600 }}>{u.name}</td>
                <td>{u.email}</td>
                <td><span className={`turole ${u.role}`}>{u.role}</span></td>
                <td><span className={`ordst${u.locked ? "" : " conf"}`} style={u.locked ? { background: "rgba(255,79,79,.2)", color: "var(--error)" } : {}}>{u.locked ? "ðŸ”’ Locked" : "âœ“ Active"}</span></td>
              </tr>
            ))}</tbody>
          </table>}

          {/* MODAL */}
          {(showAdd || editing) && (
            <div className="movl" role="dialog" aria-modal="true" onClick={e => e.target.className === "movl" && closeModal()}>
              <div className="modal" data-testid="movie-form-modal">
                <h2 className="modal-t">{editing ? "Edit Movie" : "Add Movie"}</h2>
                <FormField id="m-title" label="Title *" fk="title" ph="Movie title" />
                <FormField id="m-poster" label="Poster URL" fk="poster" ph="https://..." />
                <FormField id="m-rating" label="Rating (0-10) *" fk="rating" ph="8.5" />
                <FormField id="m-duration" label="Duration (min) *" fk="duration" ph="120" />
                <FormField id="m-year" label="Year" fk="year" ph="2024" />
                <FormField id="m-cast" label="Cast (comma separated)" fk="cast" ph="Actor 1, Actor 2" />
                <FormField id="m-showtimes" label="Showtimes (comma separated)" fk="showtimes" ph="10:00, 14:00" />
                <div className="fg">
                  <label className="flbl" htmlFor="m-genre">Genre</label>
                  <select id="m-genre" className="finp" value={form.genre} onChange={e => setForm(p => ({ ...p, genre: e.target.value }))} data-testid="admin-input-genre">
                    {GENRES.filter(g => g !== "All").map(g => <option key={g}>{g}</option>)}
                  </select>
                </div>
                <div className="fg">
                  <label className="flbl" htmlFor="m-desc">Description *</label>
                  <textarea id="m-desc" className={`finp${ferr.description ? " err" : ""}`} rows={3} placeholder="Movie description..."
                    value={form.description} onChange={e => setForm(p => ({ ...p, description: e.target.value }))}
                    aria-label="Description" data-testid="admin-input-description" style={{ resize: "vertical" }} />
                  {ferr.description && <div className="ferr">{ferr.description}</div>}
                </div>
                <div className="fb g8">
                  <button className="btn" onClick={save} data-testid="btn-save-movie">{editing ? "Save Changes" : "Add Movie"}</button>
                  <button className="btn sec" onClick={closeModal}>Cancel</button>
                </div>
              </div>
            </div>
          )}
        </div></div>
      );
    }

    // â”€â”€ FOOTER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Footer() {
      const { nav } = useApp();
      const year = new Date().getFullYear();
      return (
        <footer style={{ background: "var(--bg2)", borderTop: "1px solid var(--border)", marginTop: "auto" }}>
          {/* MAIN FOOTER */}
          <div className="container" style={{ padding: "48px 24px 32px", display: "grid", gridTemplateColumns: "repeat(auto-fit,minmax(180px,1fr))", gap: 36 }}>
            {/* BRAND */}
            <div>
              <div className="logo" style={{ cursor: "default", fontSize: 26, marginBottom: 14 }}>MOVIE<span style={{ color: "var(--text)" }}>TIME</span></div>
              <p style={{ color: "var(--text2)", fontSize: 13, lineHeight: 1.7, marginBottom: 16 }}>
                Tel Aviv's premier cinema experience. Bringing you the best of Hollywood and world cinema since 2018.
              </p>
              <div style={{ display: "flex", gap: 10 }}>
                {["ðŸ“˜", "ðŸ“¸", "ðŸ¦", "â–¶ï¸"].map((icon, i) => (
                  <button key={i} style={{ background: "var(--bg3)", border: "1px solid var(--border)", color: "var(--text)", width: 36, height: 36, borderRadius: 8, cursor: "pointer", fontSize: 16, display: "flex", alignItems: "center", justifyContent: "center" }}>{icon}</button>
                ))}
              </div>
            </div>

            {/* MOVIES */}
            <div>
              <h4 style={{ fontFamily: "'Bebas Neue',sans-serif", fontSize: 18, letterSpacing: 1, marginBottom: 16, color: "var(--accent)" }}>Movies</h4>
              <div style={{ display: "flex", flexDirection: "column", gap: 9 }}>
                {[["Now Showing", "movies"], ["Coming Soon", "movies"], ["Extended Run", "movies"], ["Top Rated", "movies"], ["All Movies", "movies"]].map(([l, p]) => (
                  <span key={l} onClick={() => nav(p)} style={{ color: "var(--text2)", cursor: "pointer", fontSize: 14, transition: "color .2s" }}
                    onMouseEnter={e => e.target.style.color = "var(--accent)"} onMouseLeave={e => e.target.style.color = "var(--text2)"}>{l}</span>
                ))}
              </div>
            </div>

            {/* MY ACCOUNT */}
            <div>
              <h4 style={{ fontFamily: "'Bebas Neue',sans-serif", fontSize: 18, letterSpacing: 1, marginBottom: 16, color: "var(--accent)" }}>My Account</h4>
              <div style={{ display: "flex", flexDirection: "column", gap: 9 }}>
                {[["Login", "login"], ["Register", "register"], ["My Orders", "orders"], ["Favorites", "home"], ["Profile Settings", "login"]].map(([l, p]) => (
                  <span key={l} onClick={() => nav(p)} style={{ color: "var(--text2)", cursor: "pointer", fontSize: 14, transition: "color .2s" }}
                    onMouseEnter={e => e.target.style.color = "var(--accent)"} onMouseLeave={e => e.target.style.color = "var(--text2)"}>{l}</span>
                ))}
              </div>
            </div>

            {/* INFO */}
            <div>
              <h4 style={{ fontFamily: "'Bebas Neue',sans-serif", fontSize: 18, letterSpacing: 1, marginBottom: 16, color: "var(--accent)" }}>Cinema Info</h4>
              <div style={{ display: "flex", flexDirection: "column", gap: 9 }}>
                {[["About Us", "home"], ["Contact", "home"], ["Accessibility", "home"], ["Gift Cards", "home"], ["Group Bookings", "home"]].map(([l, p]) => (
                  <span key={l} onClick={() => nav(p)} style={{ color: "var(--text2)", cursor: "pointer", fontSize: 14, transition: "color .2s" }}
                    onMouseEnter={e => e.target.style.color = "var(--accent)"} onMouseLeave={e => e.target.style.color = "var(--text2)"}>{l}</span>
                ))}
              </div>
            </div>

            {/* VISIT US */}
            <div>
              <h4 style={{ fontFamily: "'Bebas Neue',sans-serif", fontSize: 18, letterSpacing: 1, marginBottom: 16, color: "var(--accent)" }}>Visit Us</h4>
              <div style={{ display: "flex", flexDirection: "column", gap: 10, fontSize: 13, color: "var(--text2)" }}>
                <div style={{ display: "flex", gap: 8, alignItems: "flex-start" }}><span>ðŸ“</span><span>23 Dizengoff Street<br />Tel Aviv, 6357120</span></div>
                <div style={{ display: "flex", gap: 8, alignItems: "center" }}><span>ðŸ“ž</span><span>03-555-0123</span></div>
                <div style={{ display: "flex", gap: 8, alignItems: "center" }}><span>âœ‰ï¸</span><span>info@movietime.co.il</span></div>
                <div style={{ display: "flex", gap: 8, alignItems: "flex-start" }}><span>ðŸ•</span><span>Sunâ€“Thu: 10:00â€“24:00<br />Friâ€“Sat: 10:00â€“02:00</span></div>
              </div>
            </div>
          </div>

          {/* TICKET PRICES STRIP */}
          <div style={{ background: "var(--bg3)", borderTop: "1px solid var(--border)", borderBottom: "1px solid var(--border)", padding: "12px 0" }}>
            <div className="container" style={{ display: "flex", gap: 24, overflowX: "auto", scrollbarWidth: "none", flexWrap: "wrap" }}>
              {[
                { label: "Standard", price: "â‚ª50", note: "Rows Bâ€“D" },
                { label: "Premium", price: "â‚ª65", note: "Row A (front premium)" },
                { label: "Back Row", price: "â‚ª35", note: "Row E" },
                { label: "Student", price: "â‚ª40", note: "Valid ID required" },
                { label: "Senior", price: "â‚ª38", note: "65+" },
                { label: "Child", price: "â‚ª30", note: "Under 12" },
                { label: "Family Pack", price: "â‚ª180", note: "2 adults + 2 children" },
              ].map(p => (
                <div key={p.label} style={{ display: "flex", alignItems: "center", gap: 10, flexShrink: 0 }}>
                  <div>
                    <span style={{ fontWeight: 700, color: "var(--accent)", fontSize: 15 }}>{p.price}</span>
                    <span style={{ color: "var(--text2)", fontSize: 13, marginLeft: 6 }}>{p.label}</span>
                    <span style={{ color: "var(--text3)", fontSize: 11, marginLeft: 6 }}>({p.note})</span>
                  </div>
                  <span style={{ color: "var(--border)", fontSize: 18 }}>Â·</span>
                </div>
              ))}
            </div>
          </div>

          {/* BOTTOM BAR */}
          <div className="container" style={{ padding: "16px 24px", display: "flex", justifyContent: "space-between", alignItems: "center", flexWrap: "wrap", gap: 10 }}>
            <p style={{ color: "var(--text3)", fontSize: 12 }}>Â© {year} MovieTime Cinema Ltd. All rights reserved.</p>
            <div style={{ display: "flex", gap: 16 }}>
              {["Privacy Policy", "Terms of Use", "Cookie Settings", "Sitemap"].map(l => (
                <span key={l} style={{ color: "var(--text3)", fontSize: 12, cursor: "pointer" }}
                  onMouseEnter={e => e.target.style.color = "var(--text2)"} onMouseLeave={e => e.target.style.color = "var(--text3)"}>{l}</span>
              ))}
            </div>
            <p style={{ color: "var(--text3)", fontSize: 11 }}>ðŸ”’ Secure payments Â· Built for QA testing</p>
          </div>
        </footer>
      );
    }

    // â”€â”€ ROUTER + ROOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Router() {
      const { page } = useApp();
      switch (page) {
        case "home": return <Home />;
        case "movies": return <Movies />;
        case "movieDetails": return <MovieDetails />;
        case "booking": return <Booking />;
        case "login": return <Login />;
        case "register": return <Register />;
        case "orders": return <Orders />;
        case "admin": return <Admin />;
        default: return <Home />;
      }
    }

    function AppInner() {
      const { dark } = useApp();
      return (
        <div className={`app${dark ? "" : " light"}`} data-testid="app-root" aria-label="MovieTime Application">
          <Navbar />
          <main role="main" data-testid="main-content"><Router /></main>
          <Footer />
        </div>
      );
    }

    function App() {
      return <Provider><AppInner /></Provider>;
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>

</html>
